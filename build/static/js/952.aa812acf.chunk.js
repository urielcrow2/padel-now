"use strict";(self.webpackChunknuevo=self.webpackChunknuevo||[]).push([[952],{222:function(e,t,s){s.r(t);var a=s(5861),n=s(1413),r=s(885),c=s(7757),i=s.n(c),o=s(2791),l=s(6030),d=s(4957),u=s(518),m=s(5789),p=s(2666),x=s(4005),f=s(4648),h=s(6e3),v=s(362),b=s(8310),j=(s(2237),s(2728)),y=(s(6353),s(4351)),g=(s(5580),s(184));t.default=function(){var e=(0,l.v9)((function(e){return e.auth})).image,t=(0,l.I0)(),s=(0,o.useContext)(p.X).setContext,c=(0,y.Z)(),N=c.clubs,k=(c.setClubs,c.onChangeClub,c.idClub),w=((0,m.j)(k).listTournaments,(0,o.useState)(0)),C=(0,r.Z)(w,2),Z=C[0],z=(C[1],(0,x.I)(Z).data,(0,o.useState)(e)),A=(0,r.Z)(z,2),M=A[0],S=A[1],R=(0,o.useRef)(),L=(0,o.useRef)(null),O=(0,o.useState)(!0),E=(0,r.Z)(O,2),F=E[0],_=E[1],D=(0,o.useState)(!1),T=(0,r.Z)(D,2),$=(T[0],T[1],(0,o.useState)({pass:"",pass2:""})),q=(0,r.Z)($,2),H=q[0],I=q[1],P=(0,o.useState)({type:"password",check:"fa-square color-disabled-check"}),Q=(0,r.Z)(P,2),U=Q[0],B=Q[1];(0,o.useEffect)((function(){s((function(e){return(0,n.Z)((0,n.Z)({},e),{},{titlePage:"Mis datos"})}))}),[s]),(0,o.useEffect)((function(){}),[k]);var X=function(){var e=(0,a.Z)(i().mark((function e(){var t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=H.pass,s=H.pass2,t===s){e.next=3;break}return e.abrupt("return",(0,h.sM)({icon:"info",title:"Contrase\xf1as incorrectas",text:"La contrase\xf1a y la confirmaci\xf3n deben ser identicas"}));case 3:if(t.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?_.])[A-Za-z\d@$!%*?_.]{10,15}$/)){e.next=5;break}return e.abrupt("return",(0,h.sM)({icon:"info",title:"Contrase\xf1a debil",text:"La contrase\xf1a debe de tener m\xednimo 10 y m\xe1ximo 15 caracteres; al menos 1 n\xfamero,1 m\xednuscula, 1 m\xe1yuscula y alguno de los siguientes caracteres especiales @ $ ! % * ? . _"}));case 5:return(0,h.lQ)({html:"Actualizando contrase\xf1a"}),e.prev=6,e.next=9,(0,v.x)({endpoint:"/perfil/passwd",method:"PATCH",body:{passwd:t},json:!0});case 9:I({pass:"",pass2:""}),(0,h.NO)({icon:"success",title:"La contrase\xf1a se actualiz\xf3 correctamente"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)(i().mark((function e(){var s,a,n,r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof R.current){e.next=20;break}return s=R.current.cropper.getCroppedCanvas({width:512,height:512,fillColor:"#fff"}).toDataURL("image/jpeg",.7),e.next=4,fetch(s).then((function(e){return e.blob()}));case 4:return a=e.sent,n=new File([a],"temporal.jpg",{type:a.type}),(r=new FormData).append("img",n),r.append("_method","patch"),(0,h.lQ)({html:"Actualizando imagen"}),e.prev=10,e.next=13,(0,v.x)({endpoint:"/perfil/avatar",method:"POST",body:r});case 13:""!==(c=e.sent)?((0,h.NO)({icon:"success",title:"La imagen se actualiz\xf3 correctamente"}),_(!0),S(c),t((0,u.HF)(c))):(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{className:"main-content",children:[(0,g.jsx)("div",{className:"main-content-inner",children:(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"col-lg-12 mt-3",children:(0,g.jsx)("div",{className:"card",children:(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-12 col-xs-12 mt-1 mb-5 text-center",children:(0,g.jsx)("h5",{children:"Actualiza tus datos"})}),N.load?(0,g.jsx)(f._,{}):(0,g.jsx)(b.y,(0,n.Z)({},N.user))]})})})})})}),(0,g.jsx)("div",{className:"main-content-inner",children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-6 col-sm-12",children:(0,g.jsx)("div",{className:"card",children:(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-12 col-xs-12 mt-1 mb-3 text-center",children:(0,g.jsx)("h5",{children:"Actualiza tu imagen"})}),(0,g.jsx)("div",{className:"col-md-12 col-xs-12 mt-2 d-flex justify-content-center",children:(0,g.jsxs)("div",{className:"position-relative",style:{width:220,border:"2px dashed",padding:8,cursor:"pointer"},children:[(0,g.jsx)(d.Z,{ref:R,src:M,style:{maxHeight:200,width:200},initialAspectRatio:1,cropBoxResizable:!1,dragMode:"move",guides:!1,viewMode:1,zoomTo:.2}),(0,g.jsx)("i",{className:"fa fa-2x fa-picture-o position-absolute",onClick:function(){L.current.click()},style:{top:-20,right:-15,color:"#fff",background:"rgb(9, 139, 206)",padding:12,borderRadius:50},"aria-hidden":"true"}),(0,g.jsx)("input",{ref:L,type:"file",onChange:function(e){e.preventDefault();var t=e.target.files[0];if(!/\.(?=jpg|jpeg)/gi.test(t.name.toLowerCase()))return(0,h.sM)({icon:"info",title:"Formato de imagen inv\xe1lido",text:"S\xf3lo se permiten imagenes jpg o jpeg"});var s=new FileReader;s.onload=function(){_(!1),S(s.result),L.current.value=""},s.readAsDataURL(t)},style:{display:"none"}})]})}),(0,g.jsx)("div",{className:"col-12 mt-4 mb-2 d-flex justify-content-center",children:(0,g.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:G,disabled:F,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:" Actualizar"})})]})})})}),(0,g.jsx)("div",{className:"col-md-6 col-sm-12",children:(0,g.jsx)("div",{className:"card",children:(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-12 col-xs-12 mt-1 mb-5 text-center",children:(0,g.jsx)("h5",{children:"Actualiza tu contrase\xf1a"})}),(0,g.jsx)("div",{className:"col-md-12 col-xs-12 mt-3 text-center",children:(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Nueva contrase\xf1a"}),(0,g.jsx)("input",{type:U.type,className:"form-control",onChange:function(e){return I((function(t){return(0,n.Z)((0,n.Z)({},t),{},{pass:e.target.value.trim()})}))},value:H.pass})]})}),(0,g.jsx)("div",{className:"col-md-12 col-xs-12 mt-3 text-center",children:(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Repite la nueva contrase\xf1a"}),(0,g.jsx)("input",{type:U.type,className:"form-control",onChange:function(e){return I((function(t){return(0,n.Z)((0,n.Z)({},t),{},{pass2:e.target.value.trim()})}))},value:H.pass2})]})}),(0,g.jsx)("div",{className:"col-12 mt-4 mb-2",children:(0,g.jsxs)("div",{style:{position:"absolute",cursor:"pointer",zIndex:3},onClick:function(){return function(e){var t="password",s="fa-square color-disabled-check";"password"===e&&(t="text",s="fa-check-square color-enabled-check"),B({type:t,check:s})}(U.type)},children:[(0,g.jsx)("i",{className:"fa ".concat(U.check," fa-2x me-1"),style:{cursor:"pointer"}}),(0,g.jsx)("label",{className:"custom-control-label ml-3",style:{cursor:"pointer"},children:"Mostrar"})]})}),(0,g.jsx)("div",{className:"col-12 mt-2 mb-5 d-flex justify-content-end",children:(0,g.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:X,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:" Actualizar"})})]})})})})]})}),(0,g.jsx)(j.t,{hight:200})]})}}}]);
//# sourceMappingURL=952.aa812acf.chunk.js.map