(self.webpackChunknuevo=self.webpackChunknuevo||[]).push([[544],{5781:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});n(2791);var a=n(184),s=function(e){var t=e.totalJournals,n=e.tableGeneral;return(0,a.jsx)("div",{className:"table-responsive",style:{padding:25},children:(0,a.jsxs)("table",{className:"table align-middle",style:{marginTop:30},children:[(0,a.jsx)("thead",{style:{background:"#098BCE",color:"#FFF",height:70,fontSize:15,verticalAlign:"middle",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)",borderRadius:20},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",style:{borderTopLeftRadius:20},children:"Posici\xf3n"}),(0,a.jsx)("th",{scope:"col",style:{textAlign:"center"},children:"Jugador"}),(0,a.jsx)("th",{scope:"col",children:"Cancha"}),t.map((function(e){return(0,a.jsxs)("th",{scope:"col",children:["J",e]},e)})),(0,a.jsx)("th",{scope:"col",style:{borderTopRightRadius:20},children:"Total"})]})}),(0,a.jsx)("tbody",{style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)",borderBottomLeftRadius:20,borderBottomRightRadius:20},children:n.list.users&&n.list.users.map((function(e){return(0,a.jsxs)("tr",{style:{verticalAlign:"middle"},children:[(0,a.jsx)("th",{scope:"row",style:{paddingLeft:40},children:e.position}),(0,a.jsxs)("td",{style:{textAlign:"center"},children:[(0,a.jsx)("img",{style:{width:"50px",marginBottom:"10px",borderRadius:"50%",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.32)"},alt:"avatar",src:e.img}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{style:{fontSize:12,marginRight:6},children:e.alias}),(0,a.jsx)("br",{}),e.name]}),(0,a.jsx)("td",{children:(0,a.jsxs)("span",{className:"badge bg-danger",style:{fontSize:25,marginTop:5},children:[" ",e.court," "]})}),t.map((function(t){return(0,a.jsx)("td",{children:(0,a.jsx)("span",{style:{width:80,fontSize:20,textAlign:"center"},children:e["journal"+t]})},t)})),(0,a.jsx)("td",{children:(0,a.jsx)("span",{style:{width:80,fontSize:20,textAlign:"center"},children:e.pointsGenerals})})]},e.id_user)}))})]})})}},8728:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});n(2791);var a=n(184),s=function(e){var t=e.totalJournals,n=e.tableGeneral;return n.list.users&&n.list.users.map((function(e){return(0,a.jsxs)("div",{style:{background:"#fff",padding:10,borderRadius:6,position:"relative",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)",marginBottom:15},children:[(0,a.jsxs)("div",{style:{background:"#007bff",padding:10,color:"#fff",textAlign:"right"},children:[(0,a.jsx)("span",{style:{fontSize:12,marginRight:6},children:e.alias}),(0,a.jsx)("br",{}),e.name]}),(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("b",{children:"Posici\xf3n"})," ",(0,a.jsxs)("span",{className:"badge bg-secondary",style:{fontSize:25,marginTop:5},children:[" ",e.position," "]})]}),(0,a.jsx)("img",{style:{width:"90px",margin:"10px",borderRadius:"50%",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},alt:"avatar",src:e.img}),(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("b",{children:"Cancha"})," ",(0,a.jsxs)("span",{className:"badge bg-danger",style:{fontSize:25,marginTop:5},children:[" ",e.court," "]})]})]}),(0,a.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,a.jsx)("h5",{children:"JORNADAS"}),(0,a.jsx)("hr",{style:{width:"100%"}}),(0,a.jsx)("h5",{children:"PUNTOS"})]}),t.map((function(t){return(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-3 text-center",children:t}),(0,a.jsx)("div",{className:"col-9 text-end",children:e["journal"+t]})]},t)})),(0,a.jsx)("div",{className:"d-flex justify-content-center",children:(0,a.jsx)("hr",{style:{width:"100%"}})}),(0,a.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,a.jsx)("h4",{children:"Total"}),(0,a.jsxs)("span",{className:"badge bg-warning",style:{fontSize:25,marginTop:5,marginLeft:5},children:[" ",e.pointsGenerals," "]})]})]},e.id_user)}))}},8824:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var a=n(1413),s=n(5861),r=n(885),i=n(7757),o=n.n(i),c=n(2791),l=n(362),d=function(e){var t=(0,c.useState)({load:!0,list:[]}),n=(0,r.Z)(t,2),i=n[0],d=n[1],u=(0,c.useCallback)((0,s.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("llamada Lista..."),d((function(e){return(0,a.Z)((0,a.Z)({},e),{},{load:!0})})),t.prev=2,t.next=5,(0,l.x)({endpoint:"/tournaments/table/".concat(e)});case 5:n=t.sent,console.log(n),d({load:!1,list:n}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),d({load:!1,list:[]});case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e]);return(0,c.useEffect)((function(){0!==e&&u()}),[u]),{tableGeneral:i}}},7035:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(1413),s=n(2791),r=n(2666),i=n(8813),o=n(5861),c=n(885),l=n(7757),d=n.n(l),u=n(9353),m=n.n(u),x=n(362),f=n(4648),h=n(6e3),p=n(2859),j=n(2728),b=n(184),v=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.setSearchTournaments,r=e.setTournamentsContext,l=e.tournamentsContext,u=e.setTournamentsSelect,v=e.setIdTournamentDetail,g=function(e){var t=(0,s.useRef)(!0),n=(0,s.useState)({load:!0,data:[],select:[],list:[]}),a=(0,c.Z)(n,2),r=a[0],i=a[1],l=(0,s.useState)(0),u=(0,c.Z)(l,2),m=u[0],f=u[1],h=(0,s.useCallback)((0,o.Z)(d().mark((function n(){var a;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i({load:!0,data:[],select:[],list:[]}),n.next=3,(0,x.x)({endpoint:"/tournaments?status=".concat(e.status,"&id=").concat(e.id,"&club=").concat(m)});case 3:if(a=n.sent,t.current){n.next=6;break}return n.abrupt("return");case 6:0===m&&f(a.id_club),i({load:!1,select:a.list,data:a.items,list:a.clubs});case 8:case"end":return n.stop()}}),n)}))),[e.status,e.id,m]);return(0,s.useEffect)((function(){h()}),[h]),(0,s.useEffect)((function(){return function(){t.current=!1}}),[]),{tournaments:r,getTournaments:h,onChangeClub:function(e){f(e.target.value)},idClub:m}}(l),y=g.tournaments,N=g.getTournaments,w=g.onChangeClub,C=g.idClub,S=(0,s.useState)(window.innerWidth),k=(0,c.Z)(S,2),T=k[0],Z=k[1];(0,s.useEffect)((function(){r((function(e){return(0,a.Z)((0,a.Z)({},e),{},{total:y.data.length,onChangeClub:w,tournaments:y,idClub:C})}))}),[y.data,r]),(0,s.useEffect)((function(){u(y.select)}),[y.select,u]),(0,s.useEffect)((function(){var e=function(){return Z(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var _=function(e){t(3),n(!1),v(e)},R=function(e,t,n){(0,h.uI)("Deseas cambiar el estatus del torneo: ".concat(n),"Los torneos archivados no se eliminan, pero si se ocultan para los usuarios que no sean administrador",function(){var n=(0,o.Z)(d().mark((function n(a){var s,r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a.isConfirmed){n.next=19;break}return s={id:e,status:1===t?2:1},(0,h.lQ)({html:"Actualizando estatus"}),n.prev=4,n.next=7,(0,x.x)({endpoint:"/tournaments/status",method:"PUT",body:s,json:!0});case 7:if(r=n.sent,parseInt(r.id)!==e||1!==parseInt(r.affected)){n.next=13;break}(0,h.NO)({icon:"success",title:"Actualizaci\xf3n correcta"}),N(),n.next=14;break;case 13:return n.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 14:n.next=19;break;case 16:return n.prev=16,n.t0=n.catch(4),n.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 19:case"end":return n.stop()}}),n,null,[[4,16]])})));return function(e){return n.apply(this,arguments)}}())},E=function(e,t){(0,h.uI)("Deseas eliminar el torneo: ".concat(t),"Todos los registros desapareceran, esta opci\xf3n se recomienda s\xf3lo cuando se cre\xf3 un torneo y no le han cargado datos",function(){var t=(0,o.Z)(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isConfirmed){t.next=17;break}return(0,h.lQ)({html:"Eliminando torneo"}),t.prev=2,t.next=5,(0,x.x)({endpoint:"/tournaments/".concat(e),method:"DELETE",json:!0});case 5:if(!(t.sent.length>0)){t.next=11;break}(0,h.NO)({icon:"success",title:"Torneo eliminado"}),N(),t.next=12;break;case 11:return t.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 12:t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(2),t.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}())},F=function(){var e=(0,o.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.uI)("Descargar tabla general","Se descarga la \xfaltima jornada activa",function(){var e=(0,o.Z)(d().mark((function e(n){var a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=20;break}return(0,h.lQ)({html:"Generando archivo"}),a="",e.prev=3,e.next=6,(0,x.x)({endpoint:"/reportes/tabla/".concat(t)});case 6:a=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 12:return e.next=14,fetch(a);case 14:return s=e.sent,e.next=17,s.blob();case 17:s=e.sent,m()(s,"tabla_general.pdf"),(0,h.NO)({icon:"success",title:"Archivo descargado"});case 20:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{className:"table-responsive",style:{padding:25},children:[y.load?(0,b.jsx)(f._,{}):T<920?(0,b.jsx)("div",{className:"row",children:y.data.map((function(e){return(0,b.jsx)("div",{className:"col-12",style:{marginBottom:20},children:(0,b.jsxs)("div",{style:{background:"#fff",padding:10,borderRadius:6,position:"relative",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)"},children:[(0,b.jsxs)("div",{style:{background:"#007bff",padding:10,color:"#fff"},children:[e.name," "]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between",children:[" ",(0,b.jsx)("b",{children:"F. creaci\xf3n:"})," ",(0,p.AN)(e.created_at)," "]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between",children:[" ",(0,b.jsx)("b",{children:"Jugadores:"})," ",e.players," "]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,b.jsx)("b",{children:"Avance:"}),(0,b.jsx)("progress",{value:100/e.journals*(parseInt(e.last_journal_close)+1),max:"100"}),(0,b.jsxs)("span",{className:"ms-2",children:[Math.floor(100/e.journals*(parseInt(e.last_journal_close)+1)),"%"]})]}),(0,b.jsx)("div",{className:"d-flex justify-content-center",children:(0,b.jsx)("hr",{style:{width:"80%"}})}),(0,b.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,b.jsx)("button",{type:"button",title:"Descargar tabla general",className:"btn btn-outline-primary me-2",onClick:function(){return F(e.id)},children:(0,b.jsx)("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"})}),(0,b.jsx)("button",{type:"button",title:"Detalles",className:"btn btn-outline-success me-2",onClick:function(){return _(e.id)},children:(0,b.jsx)("i",{className:"fa fa-plus ","aria-hidden":"true"})}),(0,b.jsx)("button",{type:"button",title:"Eliminar",className:"btn btn-outline-danger me-2",onClick:function(){return E(e.id,e.name)},children:(0,b.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})}),(0,b.jsx)("button",{type:"button",title:"Archivar / Desarchivar",className:"btn btn-outline-secondary",onClick:function(){return R(e.id,e.status,e.name)},children:(0,b.jsx)("i",{className:"fa fa-history","aria-hidden":"true"})})]})]})},e.id)}))}):(0,b.jsxs)("table",{className:"table align-middle",style:{marginTop:30},children:[(0,b.jsx)("thead",{style:{background:"#098BCE",color:"#FFF",height:70,fontSize:15,verticalAlign:"middle",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)",borderRadius:20},children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",style:{borderTopLeftRadius:20},children:"No."}),(0,b.jsx)("th",{scope:"col",children:"Torneo"}),(0,b.jsx)("th",{scope:"col",children:"F. creaci\xf3n"}),(0,b.jsx)("th",{scope:"col",children:"Jugadores"}),(0,b.jsx)("th",{scope:"col",children:"Avance torneo"}),(0,b.jsx)("th",{scope:"col",style:{borderTopRightRadius:20},children:"Opciones"})]})}),(0,b.jsx)("tbody",{style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)",borderBottomLeftRadius:20,borderBottomRightRadius:20},children:y.data.map((function(e,t){return(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"row",style:{paddingLeft:40},children:t+1}),(0,b.jsxs)("td",{children:[" ",e.name]}),(0,b.jsxs)("td",{children:[" ",(0,p.AN)(e.created_at)]}),(0,b.jsxs)("td",{style:{textAlign:"center"},children:[" ",e.players," "]}),(0,b.jsxs)("td",{children:[" ",(0,b.jsx)("progress",{value:100/e.journals*parseInt(e.last_journal_close),max:"100"})," ",Math.floor(100/e.journals*parseInt(e.last_journal_close)),"%"]}),(0,b.jsxs)("td",{children:[(0,b.jsx)("button",{type:"button",title:"Descargar tabla general",className:"btn btn-outline-primary me-2 mb-md-0 mb-2",onClick:function(){return F(e.id)},children:(0,b.jsx)("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"})}),(0,b.jsx)("button",{type:"button",title:"Detalles",className:"btn btn-outline-success me-2 mb-md-0 mb-2",onClick:function(){return _(e.id)},children:(0,b.jsx)("i",{className:"fa fa-plus ","aria-hidden":"true"})}),(0,b.jsx)("button",{type:"button",title:"Eliminar",className:"btn btn-outline-danger me-2 mb-md-0 mb-2",onClick:function(){return E(e.id,e.name)},children:(0,b.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})}),(0,b.jsx)("button",{type:"button",title:"Archivar / Desarchivar",className:"btn btn-outline-secondary",onClick:function(){return R(e.id,e.status,e.name)},children:(0,b.jsx)("i",{className:"fa fa-history","aria-hidden":"true"})})]})]},e.id)}))})]}),(0,b.jsx)(j.t,{hight:200})]})},g=n(3943),y=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.setSearchTournaments,r=e.setFormData,l=e.formData.generals,u=l.name,m=void 0===u?"":u,x=l.players,f=void 0===x?"":x,p=l.journals,j=void 0===p?3:p,v=l.initial_date,y=void 0===v?"":v,N=l.final_date,w=void 0===N?"":N,C=l.players_by_court,S=void 0===C?4:C,k=(0,g.cI)({name:(0,g.Vs)({val:m,type:"text",required:!0,focus:!!m}),players:(0,g.Vs)({val:f,type:"number",required:!0,focus:!!f}),journal:(0,g.Vs)({val:j,type:"number",required:!0,focus:!!j}),dateStart:(0,g.Vs)({val:y,type:"date",focus:!!y}),dateEnd:(0,g.Vs)({val:w,type:"date",focus:!!w}),playersForCourt:(0,g.Vs)({val:S,type:"number",required:!0,focus:!!S})}),T=(0,c.Z)(k,5),Z=T[0],_=T[1],R=T[2],E=T[3],F=T[4],A=function(){var e=(0,o.Z)(d().mark((function e(n){var s,i,o,c,l,u,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(0,g.t8)(Z,_)){e.next=3;break}return e.abrupt("return");case 3:for(s={name:Z.name.val,players:Math.abs(Z.players.val),journals:Math.abs(Z.journal.val),initial_date:Z.dateStart.val,final_date:Z.dateEnd.val,courts:parseInt(Math.abs(Z.players.val))/parseInt(Math.abs(Z.playersForCourt.val)),players_by_court:Math.abs(Z.playersForCourt.val)},(0,h.NO)({icon:"success",title:"Avance guardado"}),i=[],o=parseInt(s.journals),c=0;c<o;c++){for(l={},u=parseInt(s.courts),m=0;m<u;m++)l[m+1]={date:"",time:""};i.push(l)}r((function(e){return(0,a.Z)((0,a.Z)({},e),{},{generals:s,journals:i})})),t(4);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){t(1),n(!0)},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-left me-2","aria-hidden":"true"})," Lista de torneos"]}),(0,b.jsx)("h4",{className:"text-center mb-5",children:" Crear nuevo torneo paso 1 de 4 "}),(0,b.jsx)("form",{onSubmit:A,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"form-gp col-md-12",children:[(0,b.jsx)("label",{className:Z.name.focus?"focusActive":"",children:"Nombre del torneo"}),(0,b.jsx)("input",{name:"name",type:"text",onChange:R,onFocus:E,onBlur:F,value:Z.name.val,autoComplete:"off"}),(0,b.jsx)("i",{className:"fa fa-tag fa-fw"}),(0,b.jsx)("div",{className:"text-danger",children:Z.name.error&&"Obligatorio"})]}),(0,b.jsxs)("div",{className:"form-gp col-md-6",children:[(0,b.jsx)("label",{className:Z.players.focus?"focusActive":"",children:"N\xfamero jugadores"}),(0,b.jsx)("input",{name:"players",type:"number",onChange:R,onFocus:E,onBlur:F,value:Z.players.val,min:"4",autoComplete:"off"}),(0,b.jsx)("i",{className:"fa fa-users fa-fw"}),(0,b.jsx)("div",{className:"text-danger",children:Z.players.error&&"Obligatorio y deben ser m\xfaltiplos de 4"})]}),(0,b.jsxs)("div",{className:"form-gp col-md-6",children:[(0,b.jsx)("label",{className:Z.journal.focus?"focusActive":"",children:"N\xfamero jornadas"}),(0,b.jsx)("input",{name:"journal",type:"number",onChange:R,onFocus:E,onBlur:F,value:Z.journal.val,min:"1",autoComplete:"off"}),(0,b.jsx)("i",{className:"fa fa-sort-numeric-asc fa-fw"}),(0,b.jsx)("div",{className:"text-danger",children:Z.journal.error&&"Obligatorio y al menos 1 jornada"})]}),(0,b.jsxs)("div",{className:"form-gp col-md-6 custome-date",children:[(0,b.jsx)("label",{className:"focusActive",children:"Fecha inicio"}),(0,b.jsx)("input",{name:"dateStart",type:"date",onChange:R,onFocus:E,onBlur:F,value:Z.dateStart.val,autoComplete:"off",style:{padding:"0!important"}}),(0,b.jsx)("div",{className:"text-danger",children:Z.dateStart.error&&"Obligatorio"})]}),(0,b.jsxs)("div",{className:"form-gp col-md-6 custome-date",children:[(0,b.jsx)("label",{className:"focusActive",children:"Fecha fin"}),(0,b.jsx)("input",{name:"dateEnd",type:"date",onChange:R,onFocus:E,onBlur:F,value:Z.dateEnd.val,autoComplete:"off",style:{padding:"1px!important"}}),(0,b.jsx)("div",{className:"text-danger",children:Z.dateEnd.error&&"Obligatorio"})]}),(0,b.jsxs)("div",{className:"form-gp col-md-6",children:[(0,b.jsx)("label",{className:Z.playersForCourt.focus?"focusActive":"",children:"Jugadores por cancha"}),(0,b.jsx)("input",{name:"playersForCourt",type:"number",onChange:R,onFocus:E,onBlur:F,value:Z.playersForCourt.val,min:"4",readOnly:!0,autoComplete:"off"}),(0,b.jsx)("i",{className:"fa fa-list-ol fa-fw"}),(0,b.jsx)("div",{className:"text-danger",children:Z.playersForCourt.error&&"Obligatorio"})]}),(0,b.jsx)("div",{className:"col-12 mt-4 d-flex justify-content-center",children:(0,b.jsxs)("button",{type:"submit",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",children:[" Ir a paso 2 ",(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-right ms-3","aria-hidden":"true"})]})})]})})]})},N=n(6749),w=n(6643),C=n(5255),S=n(9991),k=n(8824),T=n(5781),Z=n(8728),_=function(){var e=(0,s.useContext)(i.F).idTournamentDetail,t=(0,k.J)(e).tableGeneral,n=(0,s.useState)([]),a=(0,c.Z)(n,2),r=a[0],o=a[1],l=(0,s.useState)(window.innerWidth),d=(0,c.Z)(l,2),u=d[0],m=d[1];return(0,s.useEffect)((function(){var e=function(){return m(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,s.useEffect)((function(){for(var e=[],n=1;n<=t.list.journals;n++)e.push(n);o(e)}),[t.list.journals]),(0,b.jsxs)(b.Fragment,{children:[t.load?(0,b.jsx)("div",{style:{marginTop:45},children:(0,b.jsx)(f._,{})}):u>760?(0,b.jsx)(T.Q,{totalJournals:r,tableGeneral:t}):(0,b.jsx)(Z.S,{totalJournals:r,tableGeneral:t}),(0,b.jsx)(j.t,{hight:200})]})},R=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.setSearchTournaments,a=e.idTournamentDetail,r=e.showResumen,l=e.setShowResumen,u=e.tournamentsContext,p=(0,s.useContext)(N.Q),v=p.userP,g=p.setUserP,y=p.vs,k=p.groupVisibility,T=(0,s.useState)(0),Z=(0,c.Z)(T,2),R=Z[0],E=Z[1],F=(0,w.T)(R,a,u.idClub),A=F.data,z=F.onChangeDateSingle,O=F.onChangePoints,L=F.upPositionUser,D=F.downPositionUser,B=F.onChangeDateMasive,I=F.subeYbaja1,U=F.subeYbaja2,P=(0,s.useState)(window.innerWidth),M=(0,c.Z)(P,2),J=M[0],G=M[1],Q=(0,s.useState)(0),V=(0,c.Z)(Q,2),q=V[0],W=V[1],H=(0,s.useState)(!1),Y=(0,c.Z)(H,2),$=Y[0],X=Y[1];(0,s.useEffect)((function(){var e=function(){return G(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var K=function(){var e=(0,o.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],A.times.forEach((function(e,n){Object.keys(e).forEach((function(e){t.push([A.times[n][e].date,A.times[n][e].time])}))})),n={journal:A.journal_active,idTournament:a,users:v,vs:y,times:t},(0,h.lQ)({html:"Guardando cambios"}),console.log(n),e.prev=5,e.next=8,(0,x.x)({endpoint:"/tournaments",method:"PUT",body:n,json:!0});case 8:if(!e.sent.idTournament){e.next=14;break}return(0,h.NO)({icon:"success",title:"Cambios guardados"}),e.abrupt("return",!0);case 14:return(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return",!1);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(5),(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,o.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.uI)("Descargar hoja de anotaciones","",function(){var e=(0,o.Z)(d().mark((function e(t){var n,s,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=21;break}return n=0===R?A.journal_active:R,(0,h.lQ)({html:"Generando archivo"}),s="",e.prev=4,e.next=7,(0,x.x)({endpoint:"/reportes/anotaciones/".concat(a,"/").concat(n)});case 7:s=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 13:return e.next=15,fetch(s);case 15:return r=e.sent,e.next=18,r.blob();case 18:r=e.sent,m()(r,"hoja_anotaciones.pdf"),(0,h.NO)({icon:"success",title:"Archivo descargado"});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,o.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.uI)("Descargar horarios","",function(){var e=(0,o.Z)(d().mark((function e(t){var n,s,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=21;break}return n=0===R?A.journal_active:R,(0,h.lQ)({html:"Generando archivo"}),s="",e.prev=4,e.next=7,(0,x.x)({endpoint:"/reportes/horarios/".concat(a,"/").concat(n)});case 7:s=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 13:return e.next=15,fetch(s);case 15:return r=e.sent,e.next=18,r.blob();case 18:r=e.sent,m()(r,"horarios.pdf"),(0,h.NO)({icon:"success",title:"Archivo descargado"});case 21:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,o.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.Px)((function(e){e&&(1===parseInt(e)?((0,h.lQ)({html:"Espere..."}),I(k.current),setTimeout((function(){(0,h.eJ)()}),1500)):2===parseInt(e)&&((0,h.lQ)({html:"Espere..."}),U(k.current),setTimeout((function(){(0,h.eJ)()}),1500)))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-dark mb-4 d-flex align-items-center",onClick:function(){t(1),n(!0)},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-left me-2","aria-hidden":"true"})," Lista de torneos"]}),(0,b.jsxs)("h4",{className:"text-center mb-3 position-relative",style:{paddingRight:60},children:[A.name,(0,b.jsx)("i",{className:"fa ".concat($?"fa-minus-circle":"fa-plus-circle"),"aria-hidden":"true",onClick:function(){return X(!$)},style:{position:"absolute",cursor:"pointer",right:0,bottom:0,fontSize:35,color:"#2e2e2e"}})]}),(0,b.jsxs)("div",{className:"row mt-3 detail-tournament",children:[(0,b.jsxs)("div",{className:"".concat($?"element-show1":"element-hide1"),children:[(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"N\xfamero de jugadores"}),(0,b.jsx)("i",{className:"fa fa-users position-absolute","aria-hidden":"true"}),(0,b.jsx)("span",{className:"detail",children:v.length>0?v.length:"Cargando..."})]}),(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"N\xfamero de jornadas"}),(0,b.jsx)("i",{className:"fa fa-sort-numeric-asc position-absolute","aria-hidden":"true"}),(0,b.jsxs)("span",{className:"detail",children:[A.journals_total," "]})]}),(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"\xdaltima jornada finalizada"}),(0,b.jsx)("i",{className:"fa fa-lock position-absolute","aria-hidden":"true"}),(0,b.jsx)("span",{className:"detail",children:A.last_journal_close})]}),(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"Fecha de inicio"}),(0,b.jsx)("i",{className:"fa fa-calendar-o position-absolute","aria-hidden":"true"}),(0,b.jsx)("span",{className:"detail",children:A.initial_date})]}),(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"Fecha fin"}),(0,b.jsx)("i",{className:"fa fa-calendar position-absolute","aria-hidden":"true"}),(0,b.jsx)("span",{className:"detail",children:A.final_date})]}),(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"N\xfamero de canchas"}),(0,b.jsx)("i",{className:"fa fa-columns position-absolute","aria-hidden":"true"}),(0,b.jsx)("span",{className:"detail",children:A.times.length>0?A.times.length:"Cargando..."})]}),(0,b.jsxs)("div",{className:"col-md-4 col-12 position-relative icon-detail",children:[(0,b.jsx)("div",{className:"detail mb-2 mt-2",children:"Jugadores por cancha"}),(0,b.jsx)("i",{className:"fa fa-list-ol position-absolute","aria-hidden":"true"}),(0,b.jsx)("span",{className:"detail",children:A.number_players_by_court})]})]}),(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)("hr",{})}),(0,b.jsxs)("ul",{className:"nav nav-pills nav-justified mb-1",children:[(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link ".concat(0===q&&"active"),onClick:function(){return W(0)},children:"Editar"})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("button",{type:"button",className:"nav-link ".concat(1===q&&"active"),onClick:function(){return W(1)},children:"T. General"})})]}),(0,b.jsx)("div",{className:"col-12 mb-1",children:(0,b.jsx)("hr",{})}),0===q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"col-md-6 col-12 d-flex justify-content-start position-relative mb-5",children:[(0,b.jsx)("label",{style:{position:"absolute",top:-28,left:25,marginTop:10,color:"#ccc"},children:"Jornada"}),(0,b.jsxs)("label",{style:{position:"absolute",bottom:-27,left:38,color:"#ccc"},children:[" de ",A.journals_total]}),A.load?(0,b.jsx)("select",{className:"form-control",disabled:!0,style:{width:70,fontSize:16,textAlign:"center",marginLeft:4,marginRight:4}}):(0,b.jsx)("select",{className:"form-control",value:A.journal_active,onChange:function(e){E(e.target.value)},style:{width:70,fontSize:16,textAlign:"center",marginLeft:4,marginRight:4},children:Array(A.last_journal_close).fill().map((function(e,t){return(0,b.jsx)("option",{value:t+1,children:t+1},t)}))}),(0,b.jsxs)("div",{className:"position-relative ms-1",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-14,left:10,padding:"0 10px",color:"#ccc",fontSize:11,zIndex:1},children:"Aplicaci\xf3n masiva"}),(0,b.jsx)("input",{type:"date",onChange:B,disabled:A.load||!r,style:{width:140,height:50,fontSize:16,textAlign:"center",marginLeft:4,marginRight:10,zIndex:2}})]}),(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-14,left:10,padding:"0 10px",color:"#ccc",fontSize:11},children:"Subir"}),(0,b.jsx)("span",{style:{position:"absolute",top:50,left:10,padding:"0 10px",color:"#ccc",fontSize:11},children:"Bajar"}),(0,b.jsx)("button",{type:"button",onClick:ne,title:"Subir y bajar jugadores",className:"btn btn-outline-warning me-2",disabled:A.load||!r,children:(0,b.jsx)("i",{className:"fa fa-2x fa-sort fa-fw","aria-hidden":"true"})})]})]}),(0,b.jsxs)("div",{className:"col-md-6 col-12 d-flex justify-content-md-end justify-content-start position-relative mb-4",children:[(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-14,left:0,padding:"0 10px",color:"#ccc",fontSize:11},children:"Descargar"}),(0,b.jsx)("span",{style:{position:"absolute",top:50,left:-4,padding:"0 10px",color:"#ccc",fontSize:11},children:"Anotaciones"}),(0,b.jsx)("button",{type:"button",onClick:ee,title:"Descargar hoja de anotaciones",className:"btn btn-outline-primary me-2",disabled:A.load||!r,children:(0,b.jsx)("i",{className:"fa fa-2x fa-file-pdf-o fa-fw","aria-hidden":"true"})})]}),(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-14,left:0,padding:"0 10px",color:"#ccc",fontSize:11},children:"Descargar"}),(0,b.jsx)("span",{style:{position:"absolute",top:50,left:4,padding:"0 10px",color:"#ccc",fontSize:11},children:"Horarios"}),(0,b.jsx)("button",{type:"button",onClick:te,title:"Descargar horarios",className:"btn btn-outline-danger me-2",disabled:A.load||!r,children:(0,b.jsx)("i",{className:"fa fa-2x fa-file-pdf-o fa-fw","aria-hidden":"true"})})]}),(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-14,left:4,padding:"0 10px",color:"#ccc",fontSize:11},children:"Guardar"}),(0,b.jsx)("span",{style:{position:"absolute",top:50,left:4,padding:"0 10px",color:"#ccc",fontSize:11},children:"Cambios"}),(0,b.jsx)("button",{type:"button",onClick:function(){(0,h.uI)("Guardar cambios","",function(){var e=(0,o.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConfirmed&&K();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},title:"Guardar cambios",className:"btn btn-outline-success me-2",disabled:A.load||!r,children:(0,b.jsx)("i",{className:"fa fa-2x fa-floppy-o fa-fw","aria-hidden":"true"})})]}),A.last_journal_close===A.journal_active&&(A.last_journal_close_real<A.journal_active||1===A.journal_active)&&(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-14,left:7,padding:"0 10px",color:"#ccc",fontSize:11},children:"Cerrar"}),(0,b.jsx)("span",{style:{position:"absolute",top:50,left:3,padding:"0 10px",color:"#ccc",fontSize:11},children:"Jornada"}),(0,b.jsx)("button",{type:"button",title:"Cerrar jornada",onClick:function(){(0,h.uI)("Cerrar jornada ".concat(A.journal_active),"Al cerrar la jornada habilitaras la siguiente",function(){var e=(0,o.Z)(d().mark((function e(t){var n,s,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=24;break}return e.next=3,K();case 3:if(n=e.sent,console.log(n),n){e.next=7;break}return e.abrupt("return");case 7:return s={journal:A.journal_active,idTournament:a},(0,h.lQ)({html:"Cerrando jornada"}),e.prev=9,e.next=12,(0,x.x)({endpoint:"/tournaments/journal_close",method:"PUT",body:s,json:!0});case 12:if(!(r=e.sent).idTournament){e.next=18;break}(0,h.NO)({icon:"success",title:"Jornada cerrada correctamente"}),E(r.journal+1),e.next=19;break;case 18:return e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e.catch(9),e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 24:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t){return e.apply(this,arguments)}}())},className:"btn btn-outline-dark",disabled:A.load||!r,children:(0,b.jsx)("i",{className:"fa fa-2x fa-lock fa-fw","aria-hidden":"true"})})]})]}),(0,b.jsx)("div",{className:"col-12",children:A.load?(0,b.jsx)(f._,{className:"mt-5"}):J>920?(0,b.jsx)("div",{className:"row",style:{marginTop:20},children:(0,b.jsx)(C.v,{courts:A.times[0],users:v,numberPlayers:A.number_players_by_court,onChangeDateSingle:z,onChangePoints:O,upPositionUser:L,downPositionUser:D,disabled:!1,setShowResumen:l,showResumen:r,controlVisibility:g,groupVisibility:k})}):(0,b.jsx)("div",{className:"row",style:{marginTop:20},children:(0,b.jsx)(S.r,{courts:A.times[0],users:v,numberPlayers:A.number_players_by_court,onChangeDateSingle:z,onChangePoints:O,upPositionUser:L,downPositionUser:D,disabled:!1,setShowResumen:l,showResumen:r,controlVisibility:g,groupVisibility:k})})})]}):(0,b.jsx)(_,{}),(0,b.jsx)(j.t,{hight:200})]})]})},E=n(2982),F=function(e){var t=e.id,n=e.name,a=e.img,s=e.select,r=e.changeSelectSingle;return(0,b.jsx)("div",{className:"col-md-4",style:{marginBottom:50,position:"relative"},children:(0,b.jsxs)("div",{style:{background:"#fff",padding:10,borderRadius:6,position:"relative",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)",height:120},children:[(0,b.jsx)("div",{style:{position:"absolute",top:10,left:20},children:(0,b.jsx)("img",{style:{width:"70px",marginBottom:"10px",borderRadius:"50%",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)"},alt:"avatar",src:a})}),(0,b.jsx)("div",{className:"mt-5",style:{marginLeft:90},children:n}),(0,b.jsx)("div",{className:"d-flex justify-content-end mt-n3",style:{position:"absolute",right:10,top:10},children:(0,b.jsx)("i",{className:"fa fa-3x ".concat(s?"fa-check-square-o":"fa-square-o"," "),"aria-hidden":"true",onClick:function(){return r(t)},style:{cursor:"pointer"}})})]})})},A=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.formData,r=e.setFormData,l=function(e){var t=(0,s.useContext)(i.F).tournamentsContext.idClub,n=(0,s.useRef)(!0),r=(0,s.useState)({load:!0,data:[]}),l=(0,c.Z)(r,2),u=l[0],m=l[1],f=(0,s.useCallback)((0,o.Z)(d().mark((function e(){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.x)({endpoint:"/users/".concat(t)});case 2:if(s=e.sent,n.current){e.next=5;break}return e.abrupt("return");case 5:s=s.users.map((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{lastPosition:t+1,select:!1,positionInit:1})})),m({load:!1,data:s});case 7:case"end":return e.stop()}}),e)}))),[]);return(0,s.useEffect)((function(){return e.length>0?m({load:!1,data:e}):f(),function(){n.current=!1}}),[f,e]),{users:u,setUsers:m}}(n.users),u=l.users,m=l.setUsers,p=(0,s.useState)([]),v=(0,c.Z)(p,2),g=v[0],y=v[1],N=(0,s.useState)(""),w=(0,c.Z)(N,2),C=w[0],S=w[1],k=(0,s.useState)(!1),T=(0,c.Z)(k,2),Z=T[0],_=T[1],R=(0,s.useRef)(n.totalSelected),A=function(e){var t=u.data.map((function(t){return t.id===e&&(t.select=!t.select,t.select?R.current++:R.current--),t}));m((0,a.Z)((0,a.Z)({},u),{},{data:t}))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){return t(2)},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-left me-2","aria-hidden":"true"})," Paso 1"]}),(0,b.jsx)("h4",{className:"text-center mb-1",children:" Selecciona a los jugadores paso 2 de 4 "}),(0,b.jsxs)("div",{className:"row mt-3",children:[(0,b.jsx)("div",{className:"col-md-4",children:(0,b.jsxs)("div",{className:"row card-counter primary",children:[(0,b.jsx)("div",{className:"col-4",children:(0,b.jsx)("i",{className:"fa fa-users fa-3x"})}),(0,b.jsxs)("div",{className:"col-8",children:[(0,b.jsx)("span",{className:"count-name",children:"Jugadores: "}),(0,b.jsx)("span",{className:"count-numbers",children:C?g.length:u.data.length})]})]})}),(0,b.jsx)("div",{className:"col-8 mt-5",children:(0,b.jsx)("input",{type:"text",placeholder:"Buscar jugador...",className:"form-control",value:C,onChange:function(e){S(e.target.value);var t=new RegExp("^.*".concat(e.target.value,".*$"),"i");y((0,E.Z)(u.data.filter((function(e){return e.name.match(t)}))))}})})]}),(0,b.jsxs)("div",{className:"row mt-5",children:[(0,b.jsxs)("div",{className:"col-12 mb-5 d-flex justify-content-end",children:[(0,b.jsx)("b",{children:"Total Seleccionados: "}),(0,b.jsx)("span",{className:"badge bg-danger",style:{fontSize:30,marginRight:10,marginLeft:5},children:R.current}),(0,b.jsx)("b",{children:"Seleccionar todos: "}),(0,b.jsx)("i",{className:"fa fa-3x fa-square-o ms-4","aria-hidden":"true",onClick:function(){var e=!Z;_(e);var t=u.data.map((function(t){return t.select=e,R.current=e?u.data.length:0,t}));m((0,a.Z)((0,a.Z)({},u),{},{data:t}))},style:{cursor:"pointer"}})]}),u.load?(0,b.jsx)(f._,{}):C?g.map((function(e){return(0,b.jsx)(F,(0,a.Z)((0,a.Z)({},e),{},{changeSelectSingle:A}),e.id)})):u.data.map((function(e){return(0,b.jsx)(F,(0,a.Z)((0,a.Z)({},e),{},{changeSelectSingle:A}),e.id)})),(0,b.jsx)(j.t,{hight:200}),(0,b.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,b.jsxs)("button",{type:"submit",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){if(R.current<1)return(0,h.sM)({title:"Debes seleccionar ".concat(n.generals.players," jugadores")});if(R.current>n.generals.players||R.current<n.generals.players)return(0,h.sM)({title:"Debes seleccionar ".concat(n.generals.players," jugadores")});for(var e=[],s=0,i=[],o=0;o<n.generals.courts;o++)i.push(0);u.data.forEach((function(t){if(t.select){var r=n.usersTeams.find((function(e){return e.id===t.id}));r?(e.push((0,a.Z)({},r)),r.team>0&&(i[r.team-1]+=1)):(e.push((0,a.Z)({},t)),e[s].select=!1,e[s].team=0),s++}})),r((0,a.Z)((0,a.Z)({},n),{},{users:u.data,usersTeams:e,totalUsersByTeam:i,totalSelected:R.current})),(0,h.NO)({icon:"success",title:"Avance guardado"}),t(5)},children:[" Ir a paso 3 ",(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-right ms-3","aria-hidden":"true"})]})})]})]})},z=n(6353),O=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.setSearchTournaments,r=e.tournamentsContext,o=e.setTournamentsContext,c=e.tournamentsSelect,l=(0,s.useRef)(0);return(0,b.jsx)("div",{className:"main-content-inner",style:{marginBottom:-50},children:(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-lg-12 mt-3",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"card-body",children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-10",children:(0,b.jsx)(z.q,{clubs:r.tournaments,onChangeClub:r.onChangeClub,select:r.idClub})}),(0,b.jsx)("div",{className:"col-md-2 mt-md-0 mt-2 d-flex justify-content-end",children:(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){t(2),n(!1)},style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-plus","aria-hidden":"true"})," Nuevo"]})})]}),(0,b.jsxs)("div",{className:"row mt-3",children:[(0,b.jsx)("div",{className:"col-md-4",children:(0,b.jsxs)("div",{className:"row card-counter primary",children:[(0,b.jsx)("div",{className:"col-4",children:(0,b.jsx)("i",{className:"fa fa-trophy fa-3x"})}),(0,b.jsxs)("div",{className:"col-8",children:[(0,b.jsx)("span",{className:"count-name",children:"Ligas: "}),(0,b.jsx)("span",{className:"count-numbers",children:r.total})]})]})}),(0,b.jsx)("div",{className:"col-12 col-md-5 mt-4",children:(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Selecciona un torneo"}),(0,b.jsx)("select",{className:"form-control",onChange:function(e){o((0,a.Z)((0,a.Z)({},r),{},{id:e.target.value})),l.current=e.target.value},value:l.current,children:c.map((function(e){return(0,b.jsx)("option",{value:e.id,children:e.name},e.id)}))})]})}),(0,b.jsx)("div",{className:"col-12 col-md-3 mt-4",children:(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Estatus"}),(0,b.jsxs)("select",{className:"form-control",onChange:function(e){o((0,a.Z)((0,a.Z)({},r),{},{id:0,status:e.target.value})),l.current=0},value:o.satus,children:[(0,b.jsx)("option",{value:"1",children:"Activo"}),(0,b.jsx)("option",{value:"2",children:"Archivado"})]})]})})]})]})})})})})},L=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.setSearchTournaments,r=e.formData,l=e.setFormData,u=e.tournamentsContext.idClub,m=(0,s.useState)(1),f=(0,c.Z)(m,2),p=f[0],j=f[1],v=(0,s.useState)((0,a.Z)({},r.journals[0])),g=(0,c.Z)(v,2),y=g[0],N=g[1],w=function(e,t){var n=(0,a.Z)({},y);Object.keys(n).forEach((function(a){e.target.name===a&&(n[a][t]=e.target.value)})),N(n)},C=function(){var e=(0,o.Z)(d().mark((function e(){var s,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.usersTeams.sort((function(e,t){return e.team-t.team})).map((function(e,t){return{id:e.id,position:t+1}})),i=[],r.journals.forEach((function(e,t){var n=[];Object.keys(e).forEach((function(e){n.push([r.journals[t][e].date,r.journals[t][e].time])})),i[t]=n})),o=(0,a.Z)((0,a.Z)({},r.generals),{},{journals:i,players:s,club:u}),(0,h.lQ)({html:"Creando torneo"}),e.prev=5,e.next=8,(0,x.x)({endpoint:"/tournaments",method:"POST",body:o,json:!0});case 8:if(!e.sent.id){e.next=15;break}(0,h.NO)({icon:"success",title:"Torneo creado"}),t(4),l({generals:{},users:[],journals:[],totalSelected:0,usersTeams:[],totalUsersByTeam:[],activeTeam:0}),e.next=16;break;case 15:return e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(5),e.abrupt("return",(0,h.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}));case 21:t(1),n(!0);case 23:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){t(5)},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-left me-2","aria-hidden":"true"})," Paso 3"]}),(0,b.jsx)("h4",{className:"text-center mb-1",children:" Define fechas y horarios paso 4 de 4 "}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-6 mt-3 d-flex justify-content-start",children:[(0,b.jsx)("h5",{className:"mt-3",children:"Jornada "}),(0,b.jsx)("input",{type:"number",className:"form-control",value:p,min:"1",max:r.generals.journals,onChange:function(e){j(e.target.value),N((0,a.Z)({},r.journals[parseInt(e.target.value)-1]))},style:{width:80,fontSize:20,textAlign:"center",marginLeft:4,marginRight:4}}),(0,b.jsxs)("h5",{className:"mt-3",children:[" de ",r.generals.journals]})]}),(0,b.jsx)("div",{className:"col-6 mt-3 d-flex justify-content-end",children:(0,b.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:C,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:" Finalizar"})})]}),(0,b.jsx)("hr",{}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("div",{className:"text-center mb-3",style:{fontSize:15},children:"Puedes definir fechas y horarios posteriormente"}),(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Aplicaci\xf3n masiva"}),(0,b.jsx)("input",{type:"date",onChange:function(e){var t=(0,a.Z)({},y);Object.keys(t).forEach((function(n){t[n].date=e.target.value})),N(t)},style:{width:200,height:50,fontSize:16,textAlign:"center",marginLeft:4,marginRight:4}})]})]}),(0,b.jsx)("div",{className:"table-responsive",style:{padding:25},children:(0,b.jsxs)("table",{className:"table align-middle",style:{marginTop:30},children:[(0,b.jsx)("thead",{style:{background:"#098BCE",color:"#FFF",height:70,fontSize:15,verticalAlign:"middle",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)",borderRadius:20},children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",style:{borderTopLeftRadius:20},children:"Cancha"}),(0,b.jsx)("th",{scope:"col",style:{borderTopRightRadius:20},children:"Horario"})]})}),(0,b.jsx)("tbody",{style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)",borderBottomLeftRadius:20,borderBottomRightRadius:20},children:Object.keys(y).map((function(e,t){return(0,b.jsxs)("tr",{style:{verticalAlign:"middle"},children:[(0,b.jsxs)("th",{scope:"row",style:{paddingLeft:40},children:[" ",(0,b.jsxs)("span",{className:"badge bg-danger",style:{fontSize:25,marginTop:5},children:[" ",e," "]})," "]}),(0,b.jsxs)("td",{children:[(0,b.jsx)("input",{type:"date",name:e,value:y[t+1].date,onChange:function(e){return w(e,"date")},className:"mb-md-0 mb-3",style:{width:120,height:50,fontSize:16,textAlign:"center",marginLeft:4,marginRight:4}}),(0,b.jsx)("input",{type:"time",name:e,value:y[t+1].time,onChange:function(e){return w(e,"time")},style:{width:120,height:50,fontSize:16,textAlign:"center",marginLeft:4,marginRight:4}})]})]},e)}))})]})})]})},D=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.formData,r=e.setFormData,o=(0,s.useState)([]),l=(0,c.Z)(o,2),d=l[0],u=l[1];(0,s.useEffect)((function(){for(var e=[],t=1;t<=n.generals.courts;t++)e.push(t);u(e)}),[n.generals.courts]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){return t(4)},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-left me-2","aria-hidden":"true"})," Paso 2"]}),(0,b.jsx)("h4",{className:"text-center mb-1",children:" Agrupa a los jugadores en las canchas paso 3 de 4 "}),(0,b.jsx)("div",{className:"row mt-5",children:d.map((function(e){return(0,b.jsx)("div",{className:"col-md-3 col-sm-6",style:{marginBottom:50,position:"relative"},children:(0,b.jsx)("div",{style:{background:"#303641",padding:10,borderRadius:6,position:"relative",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)",height:120,color:"#FFF"},children:(0,b.jsxs)("div",{className:"d-flex flex-column",children:[(0,b.jsxs)("span",{style:{position:"absolute",top:0,fontSize:20},children:[n.totalUsersByTeam[e-1]," ",(0,b.jsx)("span",{style:{fontSize:12},children:"jugadores"})]}),(0,b.jsx)("h1",{className:"text-center",children:e}),(0,b.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){return function(e){r((0,a.Z)((0,a.Z)({},n),{},{activeTeam:e})),t(7)}(e)},children:["seleccionar jugadores ",(0,b.jsx)("i",{className:"fa fa-2x ".concat(n.totalUsersByTeam[e-1]===n.generals.players_by_court?"fa-check-circle text-success":"fa-clock text-warning"," me-2 "),"aria-hidden":"true"})]})]})})},e)}))}),(0,b.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,b.jsxs)("button",{type:"submit",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){var e=!1;if(n.totalUsersByTeam.forEach((function(t){t!==n.generals.players_by_court&&(e=!0)})),e)return(0,h.sM)({title:"Debes completar las canchas con ".concat(n.generals.players_by_court," jugadores")});(0,h.NO)({icon:"success",title:"Avance guardado"}),t(6)},children:[" Ir a paso 4 ",(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-right ms-3","aria-hidden":"true"})]})})]})},B=function(){var e=(0,s.useContext)(i.F),t=e.setScreen,n=e.formData,r=e.setFormData,o=(0,s.useState)([]),l=(0,c.Z)(o,2),d=l[0],u=l[1],m=(0,s.useState)(""),x=(0,c.Z)(m,2),f=x[0],p=x[1],v=(0,s.useState)(0),g=(0,c.Z)(v,2),y=g[0],N=g[1];(0,s.useEffect)((function(){var e=0;n.usersTeams.forEach((function(t){t.team===n.activeTeam&&e++})),N(e)}),[n.usersTeams,n.activeTeam]);var w=function(e){var t=!1,s=n.usersTeams.map((function(a){if(a.id===e){var s=!a.select;return s&&y<parseInt(n.generals.players_by_court)?(a.team=n.activeTeam,a.select=s,N(y+1),n.totalUsersByTeam[n.activeTeam-1]+=1):!s&&y>=0?(a.team=0,a.select=s,N(y-1),n.totalUsersByTeam[n.activeTeam-1]-=1):t=!0,a}return a}));if(t)return(0,h.sM)({title:"".concat(n.generals.players_by_court," jugadores por cancha")});r((0,a.Z)((0,a.Z)({},n),{},{usersTeams:s}))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-outline-dark me-2 mb-md-0 mb-2 d-flex align-items-center",onClick:function(){return t(5)},children:[(0,b.jsx)("i",{className:"fa fa-2x fa-arrow-left me-2","aria-hidden":"true"})," Regresar"]}),(0,b.jsxs)("h4",{className:"text-center mb-1",children:[" Selecciona los jugadores del grupo ",(0,b.jsxs)("span",{className:"badge bg-danger",style:{fontSize:30,marginRight:10,marginLeft:5},children:[n.activeTeam," "]})," "]}),(0,b.jsxs)("div",{className:"row mt-3",children:[(0,b.jsx)("div",{className:"col-md-4",children:(0,b.jsxs)("div",{className:"row card-counter primary",children:[(0,b.jsx)("div",{className:"col-4",children:(0,b.jsx)("i",{className:"fa fa-users fa-3x"})}),(0,b.jsxs)("div",{className:"col-8",children:[(0,b.jsx)("span",{className:"count-name",children:"Jugadores: "}),(0,b.jsx)("span",{className:"count-numbers",children:f?d.length:n.usersTeams.length})]})]})}),(0,b.jsx)("div",{className:"col-8 mt-5",children:(0,b.jsx)("input",{type:"text",placeholder:"Buscar jugador...",className:"form-control",value:f,onChange:function(e){p(e.target.value);var t=new RegExp("^.*".concat(e.target.value,".*$"),"i");u((0,E.Z)(n.usersTeams.filter((function(e){return e.name.match(t)}))))}})})]}),(0,b.jsxs)("div",{className:"row mt-5",children:[(0,b.jsxs)("h4",{className:"text-center mb-5",children:[" ",y," seleccionados de ",n.generals.players_by_court]}),f?d.map((function(e){return 0===e.team||e.team===n.activeTeam?(0,b.jsx)(F,(0,a.Z)((0,a.Z)({},e),{},{changeSelectSingle:w}),e.id):(0,b.jsx)(b.Fragment,{})})):n.usersTeams.map((function(e){return 0===e.team||e.team===n.activeTeam?(0,b.jsx)(F,(0,a.Z)((0,a.Z)({},e),{},{changeSelectSingle:w}),e.id):(0,b.jsx)(b.Fragment,{})})),(0,b.jsx)(j.t,{hight:200})]})]})},I=(0,s.memo)((function(){var e=(0,s.useContext)(r.X).setContext,t=(0,s.useContext)(i.F),n=t.screen,o=t.searchTournaments;(0,s.useEffect)((function(){e((function(e){return(0,a.Z)((0,a.Z)({},e),{},{titlePage:"Ligas"})}))}),[e]);return(0,b.jsxs)("div",{className:"main-content",children:[o&&(0,b.jsx)(O,{}),(0,b.jsx)("div",{className:"main-content-inner",children:(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-lg-12 mt-3",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"card-body",children:function(){switch(n){case 1:return(0,b.jsx)(v,{});case 2:return(0,b.jsx)(y,{});case 3:return(0,b.jsx)(R,{});case 4:return(0,b.jsx)(A,{});case 5:return(0,b.jsx)(D,{});case 6:return(0,b.jsx)(L,{});case 7:return(0,b.jsx)(B,{});default:return(0,b.jsx)("h1",{children:"No project match"})}}()})})})})})]})})),U=I},9353:function(e){e.exports=function(e,t,n,a){var s=new Blob("undefined"!==typeof a?[a,e]:[e],{type:n||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(s,t);else{var r=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(s):window.webkitURL.createObjectURL(s),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",t),"undefined"===typeof i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(r)}),200)}}}}]);
//# sourceMappingURL=544.6d190baf.chunk.js.map