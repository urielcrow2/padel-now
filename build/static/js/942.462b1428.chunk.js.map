{"version":3,"file":"static/js/942.462b1428.chunk.js","mappings":"8MAEaA,EAAS,mCAAG,iGAErBC,QAAQC,IAAI,4BAFS,SAIUC,UAAUC,cAAcC,SAAS,SAJ3C,cAIfC,EAJe,gBAMIA,EAAiBC,YAAYC,kBANjC,UAQA,QAFjBC,EANiB,0CAUIH,EAAiBC,YAAYP,UAAW,CACzDU,iBAAiB,EACjBC,qBAAsBC,4FAZT,QAUjBH,EAViB,OAeXI,EAAM,gEACZZ,QAAQC,IAAI,eAAiBW,GAEvBC,EAAU,CACZC,OAAO,OACPC,QAAS,CACL,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAU,CACjBC,MAAOX,EACPY,GAAG,QAIXC,MAAOT,EAAM,kBAAmBC,GA7Bf,4CAAH,qD,SCEhBS,GAAaC,EAAAA,EAAAA,OAAK,WAEpB,IAAQC,GAAeC,EAAAA,EAAAA,YAAWC,EAAAA,GAA1BF,YAERG,EAAAA,EAAAA,YAAU,WACNH,GAAY,SAAAI,GAAO,yBACRA,GADQ,IAEXC,UAAY,gBAGtB,CAACL,KAEHG,EAAAA,EAAAA,YAAU,WACN3B,QAAQC,IAAI,mBACZD,QAAQC,IAAI6B,aAAaC,cAC1B,IAEH,IAIMC,EAAI,mCAAG,sGAEsB9B,UAAUC,cAAcC,SAAS,SAFvD,OAEHC,EAFG,OAIHQ,EAAU,CACZG,KAAM,2DAGVX,EAAiB4B,iBAAiB,OAAQpB,GARjC,2CAAH,qDAWV,OACI,gBAAKqB,UAAU,eAAf,UACI,gBAAKA,UAAU,qBAAf,UACI,gBAAKA,UAAU,MAAf,UACI,gBAAKA,UAAU,iBAAf,UACI,gBAAKA,UAAU,OAAf,UACI,iBAAKA,UAAW,YAAhB,WAEI,eAAIA,UAAU,cAAd,qBACA,mBAAQA,UAAU,kBAAkBC,QAxBzC,WACnBpC,KAuBwB,qCAEA,mBAAQmC,UAAU,kBAAkBC,QAASH,EAA7C,mCAWhC","sources":["helpers/subscribe.js","componets/home/HomeScreen.js"],"sourcesContent":["\r\n\r\nexport const subscribe = async () => {\r\n    \r\n    console.log(\"Iniciando suscribciÃ³n\");\r\n\r\n    const serviceWorkerReg = await navigator.serviceWorker.register('sw.js');\r\n\r\n    let subscription = await serviceWorkerReg.pushManager.getSubscription();\r\n\r\n    if (subscription === null) {\r\n\r\n        subscription = await serviceWorkerReg.pushManager.subscribe ({\r\n            userVisibleOnly: true,\r\n            applicationServerKey: process.env.REACT_APP_VAPID_PUBLIC_KEY,\r\n        });\r\n\r\n        const url = 'https://notificaciones-push-backend-production.up.railway.app';\r\n        console.log('suscrito a: ' + url );\r\n\r\n        const options = {\r\n            method:'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                token: subscription,\r\n                id:1024\r\n            })\r\n        }\r\n\r\n        fetch( url + '/notificaciones', options);\r\n    }\r\n}","import { useContext , memo, useEffect } from 'react';\r\nimport {customeContext} from '../../context/context';\r\nimport {subscribe} from '../../helpers/subscribe';\r\n\r\nconst HomeScreen = memo(() => {\r\n\r\n    const { setContext } = useContext(customeContext);\r\n\r\n    useEffect(() => {\r\n        setContext( context => (\r\n            {   ...context,\r\n                titlePage : 'Inicio'\r\n            })\r\n        );\r\n    },[setContext]);\r\n\r\n    useEffect(() => {\r\n        console.log('segun inscritos')\r\n        console.log(Notification.permission)\r\n    }, []);\r\n\r\n    const notificaciones = ()=>{\r\n        subscribe();\r\n    }\r\n\r\n    const msje = async()=>{\r\n        \r\n        const serviceWorkerReg = await navigator.serviceWorker.register('sw.js');\r\n\r\n        const options = {\r\n            body: 'Simple piece of body text.\\nSecond line of body text :)',\r\n        };\r\n\r\n        serviceWorkerReg.showNotification('hola', options);\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-content\">\r\n            <div className=\"main-content-inner\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12 mt-3\">\r\n                        <div className=\"card\">\r\n                            <div className =\"card-body\">\r\n\r\n                                <h4 className=\"text-center\">INICIO</h4>\r\n                                <button className=\"btn btn-success\" onClick={notificaciones}>Recibir notificaciones</button>\r\n\r\n                                <button className=\"btn btn-success\" onClick={msje}>a ver</button>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default HomeScreen;\r\n"],"names":["subscribe","console","log","navigator","serviceWorker","register","serviceWorkerReg","pushManager","getSubscription","subscription","userVisibleOnly","applicationServerKey","process","url","options","method","headers","body","JSON","stringify","token","id","fetch","HomeScreen","memo","setContext","useContext","customeContext","useEffect","context","titlePage","Notification","permission","msje","showNotification","className","onClick"],"sourceRoot":""}