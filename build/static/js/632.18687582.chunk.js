"use strict";(self.webpackChunknuevo=self.webpackChunknuevo||[]).push([[632],{2632:function(e,r,t){t.r(r),t.d(r,{default:function(){return j}});var n=t(1413),a=t(2791),i=t(2666),s=t(184),o=function(e){var r=e.id,t=e.name,n=e.email,a=e.number,i=e.img,o=e.disabledName,c=e.disabledEmail,u=e.disabledNumber,l=e.deleteAdmin,d=e.changeGeneral,m=e.focus,f=e.blur;return(0,s.jsx)("div",{className:"col-md-4",style:{marginBottom:50},children:(0,s.jsxs)("div",{style:{background:"#fff",padding:10,borderRadius:6,position:"relative",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)"},children:[(0,s.jsx)("div",{style:{position:"absolute",top:-40,left:20},children:(0,s.jsx)("img",{style:{width:"70px",marginBottom:"10px",borderRadius:"50%",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)"},alt:"avatar",src:i})}),(0,s.jsxs)("div",{className:"d-flex justify-content-end mt-4 position-relative",children:[(0,s.jsx)("span",{className:"position-absolute",style:{top:2,left:20,color:"#CCC"},children:"Nombre"}),(0,s.jsx)("input",{type:"text",name:"name",className:"form-control mt-4 text-uppercase",value:t||"",onChange:function(e){return d(e.target.name,e.target.value,r)},onDoubleClick:function(){return d("disabledName",!1,r)},onFocus:function(e){return m(e)},onBlur:function(e){return f(e,"disabledName",r)},readOnly:o})]}),(0,s.jsxs)("div",{className:"d-flex justify-content-end position-relative",children:[(0,s.jsx)("span",{className:"position-absolute",style:{top:2,left:20,color:"#CCC"},children:"E-mail"}),(0,s.jsx)("input",{type:"text",name:"email",className:"form-control mt-4 text-lowercase",value:n||"",onChange:function(e){return d(e.target.name,e.target.value,r)},onDoubleClick:function(){return d("disabledEmail",!1,r)},onFocus:function(e){return m(e)},onBlur:function(e){return f(e,"disabledEmail",r)},readOnly:c})]}),(0,s.jsxs)("div",{className:"d-flex justify-content-end align-items-center position-relative",children:[(0,s.jsx)("span",{className:"position-absolute",style:{top:2,left:20,color:"#CCC"},children:"Tel\xe9fono"}),(0,s.jsx)("input",{type:"text",name:"number",className:"form-control mb-2 mt-4",value:a||"",onChange:function(e){return d(e.target.name,e.target.value,r)},onDoubleClick:function(){return d("disabledNumber",!1,r)},onFocus:function(e){return m(e)},onBlur:function(e){return f(e,"disabledNumber",r)},readOnly:u}),(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger",style:{marginLeft:5,marginTop:5},onClick:function(){return l(t,i,r)},children:(0,s.jsx)("i",{className:"fa fa-trash fa-2x","aria-hidden":"true"})})]})]})})},c=t(5861),u=t(2982),l=t(4942),d=t(885),m=t(7757),f=t.n(m),p=t(6e3),b=t(2859),x=t(7812),v=t(362),h=function(e){var r=e.setUsers,t=e.users,i=(0,a.useState)({name:"",email:"",number:""}),o=(0,d.Z)(i,2),m=o[0],h=o[1],g=function(e){var r="";r="number"===e.target.name?(0,b.yD)(e.target.value):e.target.value,h((0,n.Z)((0,n.Z)({},m),{},(0,l.Z)({},e.target.name,r)))},j=function(e){var a=[].concat((0,u.Z)(t.data),[e]);a.sort((function(e,r){return e.name>r.name?1:e.name<r.name?-1:0})),r((0,n.Z)((0,n.Z)({},t),{},{data:a}))},N=function(){var e=(0,c.Z)(f().mark((function e(){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,x.l)(m)){e.next=2;break}return e.abrupt("return");case 2:if(0===t.data.filter((function(e){return e.email===m.email})).length){e.next=6;break}return(0,p.sM)({title:"E-mail ya existe"}),e.abrupt("return",!0);case 6:return r={name:m.name.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,""),email:m.email.trim(),number:m.number.replace(/[-]/g,"")},(0,p.lQ)({html:"Espere.."}),e.prev=8,e.next=11,(0,v.x)({endpoint:"/users/admin",method:"POST",body:r,json:!0});case 11:if(!(n=e.sent).errors){e.next=20;break}if(!n.errors.email){e.next=16;break}return(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Ya existe un usuario con ese e-mail"}),e.abrupt("return");case 16:return(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return");case 20:""!==n?((0,p.NO)({icon:"success",title:"Administrador resgistrado"}),j({id:n.id,name:n.name,email:n.email,number:(0,b.wK)(n.number,"-",2),img:"https://padelnow.app/padel/assets/no-image.jpg",disabledName:!0,disabledEmail:!0,disabledNumber:!0}),h({name:"",email:"",number:""})):(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(8),(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 26:case"end":return e.stop()}}),e,null,[[8,23]])})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-4 col-xs-12 mt-3 position-relative",children:[(0,s.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Nombre"}),(0,s.jsx)("span",{style:{position:"absolute",top:-12,right:25,color:"#00a65a"},children:(0,s.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})}),(0,s.jsx)("input",{type:"text",onChange:g,name:"name",className:"form-control text-uppercase",value:m.name})]}),(0,s.jsxs)("div",{className:"col-md-4 col-xs-12 mt-3 text-lowercase position-relative",children:[(0,s.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"E-mail"}),(0,s.jsx)("span",{style:{position:"absolute",top:-12,right:25,color:"#00a65a"},children:(0,s.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})}),(0,s.jsx)("input",{type:"text",onChange:g,name:"email",className:"form-control text-lowercase",value:m.email})]}),(0,s.jsxs)("div",{className:"col-md-4 col-xs-12 mt-3 position-relative",children:[(0,s.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Tel\xe9fono"}),(0,s.jsx)("input",{type:"text",onChange:g,name:"number",className:"form-control",value:m.number})]}),(0,s.jsx)("div",{className:"col-12 mt-3 d-flex justify-content-end",children:(0,s.jsx)("button",{type:"button",className:"btn btn btn-outline-primary",onClick:N,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:(0,s.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})})})]})},g=t(4648),j=function(){var e=(0,a.useContext)(i.X).setContext,r=function(){var e=(0,a.useState)({load:!0,data:[]}),r=(0,d.Z)(e,2),t=r[0],i=r[1],s=(0,a.useRef)(null),o=(0,a.useRef)(!0),m=function(e,r,a){var s=(0,u.Z)(t.data);s.forEach((function(t){t.id===a&&(t[e]=h(e,r))})),i((0,n.Z)((0,n.Z)({},t),{},{data:s}))},h=function(e,r){return"number"===e?(0,b.yD)(r):r},g=function(){var e=(0,c.Z)(f().mark((function e(r,t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.current===r.target.value){e.next=9;break}if(!(0,x.W)(r.target.name,r.target.value)){e.next=5;break}m(r.target.name,s.current,n),e.next=9;break;case 5:return e.next=7,j(r.target.name,r.target.value,n);case 7:if(!e.sent){e.next=9;break}m(r.target.name,s.current,n);case 9:m(t,!0,n);case 10:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,c.Z)(f().mark((function e(r,t,n){var a,i,s,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="",i=t,e.t0=r,e.next="name"===e.t0?5:"number"===e.t0?7:"number"===e.t0?10:12;break;case 5:return a="el nombre",e.abrupt("break",13);case 7:return a="el tel\xe9fono",i=t.replace(/[-]/g,""),e.abrupt("break",13);case 10:return a="el e-mail",e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:return(0,p.lQ)({html:"Actualizando ".concat(a)}),s=(0,l.Z)({id:n},r,i),e.prev=15,e.next=18,(0,v.x)({endpoint:"/users",method:"PATCH",body:s,json:!0});case 18:if(!(o=e.sent).errors.email){e.next=24;break}return(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Ya existe un usuario con ese e-mail"}),e.abrupt("return",!0);case 24:if(!o.id){e.next=29;break}return(0,p.NO)({icon:"success",title:"".concat(a," actualizado")}),e.abrupt("return",!1);case 29:return(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return",!0);case 31:e.next=37;break;case 33:return e.prev=33,e.t1=e.catch(15),(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return",!0);case 37:case"end":return e.stop()}}),e,null,[[15,33]])})));return function(r,t,n){return e.apply(this,arguments)}}(),N=(0,a.useCallback)((0,c.Z)(f().mark((function e(){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.x)({endpoint:"/users/admins"});case 2:if(r=e.sent,o.current){e.next=5;break}return e.abrupt("return");case 5:r=r.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{number:(0,b.wK)(e.number,"-",2),disabledName:!0,disabledEmail:!0,disabledNumber:!0})})),i({load:!1,data:r});case 7:case"end":return e.stop()}}),e)}))),[]);return(0,a.useEffect)((function(){N()}),[N]),(0,a.useEffect)((function(){return function(){o.current=!1}}),[]),{users:t,setUsers:i,changeGeneral:m,focus:function(e){s.current=e.target.value.trim()},blur:g,deleteAdmin:function(e,r,a){(0,p.qj)(e,r,function(){var e=(0,c.Z)(f().mark((function e(r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=12;break}return(0,p.lQ)({html:"Eliminando..."}),e.prev=2,e.next=5,(0,v.x)({endpoint:"/users/admin/".concat(a),method:"DELETE"});case 5:i((0,n.Z)((0,n.Z)({},t),{},{data:t.data.filter((function(e){return e.id!==a}))})),(0,p.NO)({icon:"success",title:"Usuario eliminado"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,p.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(r){return e.apply(this,arguments)}}())}}}(),t=r.users,m=r.setUsers,j=r.changeGeneral,N=r.focus,y=r.blur,k=r.deleteAdmin;return(0,a.useEffect)((function(){e((function(e){return(0,n.Z)((0,n.Z)({},e),{},{titlePage:"Super Administradores"})}))}),[e]),(0,s.jsxs)("div",{className:"main-content",children:[(0,s.jsx)("div",{className:"main-content-inner",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 mt-3",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)(h,{setUsers:m,users:t})})})})})}),(0,s.jsx)("div",{className:"main-content-inner",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)("div",{className:"row",children:t.load?(0,s.jsx)(g._,{}):t.data.map((function(e){return(0,s.jsx)(o,(0,n.Z)({changeGeneral:j,blur:y,focus:N,deleteAdmin:k},e),e.id)}))})})})})})})]})}},7812:function(e,r,t){t.d(r,{l:function(){return a},W:function(){return i}});var n=t(6e3),a=function(e){for(var r=!1,t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];if(i(a,e[a])){r=!0;break}}return r},i=function(e,r){switch(e){case"name":return s(e,r);case"email":return c(r);case"number":return u(r);case"club":return o(e,r,!0);case"adress":return o(e,r,!1);default:return!1}},s=function(e,r){if(""===r.trim()||!r.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(/^[a-zA-Z\s]+$/))return(0,n.sM)({title:"".concat(d(l[e]||e)," es obligatorio y debe tener solo letras y espacios")}),!0},o=function(e,r,t){var a=r.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(/[<>"\'&]+/);return t&&(""===r.trim()||a)?((0,n.sM)({title:"".concat(d(l[e]||e)," es obligatorio y no debe tener caracteres especiales")}),!0):""!==r.trim()&&a?((0,n.sM)({title:"".concat(d(l[e]||e)," No debe tener caracteres especiales")}),!0):void 0},c=function(e){if(""===e.trim()||!e.trim().match(/^([a-zA-Z0-9_\-.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/))return(0,n.sM)({title:"E-mail es obligatorio y debe ser valido"}),!0},u=function(e){if(""!==e&&!e.trim().match(/^[0-9-]{14}$/))return(0,n.sM)({title:"Tel\xe9fono a 10 digitos"}),!0},l={name:"nombre",club:"nombre del club",adress:"direcci\xf3n"},d=function(e){return e[0].toUpperCase()+e.substring(1)}},4648:function(e,r,t){t.d(r,{_:function(){return a}});t(2791);var n=t(184),a=function(){return(0,n.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[(0,n.jsx)("div",{className:"loader"}),(0,n.jsx)("div",{className:"text-loader",children:"Cargando..."})]})}},2982:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(907);var a=t(181);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=632.18687582.chunk.js.map