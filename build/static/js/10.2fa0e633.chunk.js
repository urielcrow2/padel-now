"use strict";(self.webpackChunknuevo=self.webpackChunknuevo||[]).push([[10],{7812:function(e,t,r){r.d(t,{l:function(){return a},W:function(){return i}});var n=r(6e3),a=function(e){for(var t=!1,r=0,n=Object.keys(e);r<n.length;r++){var a=n[r];if(i(a,e[a])){t=!0;break}}return t},i=function(e,t){switch(e){case"name":return s(e,t);case"email":return c(t);case"number":return l(t);case"club":return o(e,t,!0);case"adress":return o(e,t,!1);default:return!1}},s=function(e,t){if(""===t.trim()||!t.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(/^[a-zA-Z\s]+$/))return(0,n.sM)({title:"".concat(d(u[e]||e)," es obligatorio y debe tener solo letras y espacios")}),!0},o=function(e,t,r){var a=t.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(/[<>"\'&]+/);return r&&(""===t.trim()||a)?((0,n.sM)({title:"".concat(d(u[e]||e)," es obligatorio y no debe tener caracteres especiales")}),!0):""!==t.trim()&&a?((0,n.sM)({title:"".concat(d(u[e]||e)," No debe tener caracteres especiales")}),!0):void 0},c=function(e){if(""===e.trim()||!e.trim().match(/^([a-zA-Z0-9_\-.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/))return(0,n.sM)({title:"E-mail es obligatorio y debe ser valido"}),!0},l=function(e){if(""!==e&&!e.trim().match(/^[0-9-]{14}$/))return(0,n.sM)({title:"Tel\xe9fono a 10 digitos"}),!0},u={name:"nombre",club:"nombre del club",adress:"direcci\xf3n"},d=function(e){return e[0].toUpperCase()+e.substring(1)}},1545:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(2982),a=r(1413),i=r(885),s=r(2791),o=r(2666),c=r(1628),l=r(184),u=function(e){var t=e.root,r=e.focus,n=e.blur,a=e.changeGeneral,i=e.id,s=e.saveAdminRootFirstTime;return(0,l.jsxs)("div",{style:{padding:10},children:[(0,l.jsxs)("div",{className:"mb-3 position-relative",children:[(0,l.jsx)("span",{className:"position-absolute",style:{top:-18,left:20,color:"#CCC"},children:"Nombre"}),(0,l.jsx)("span",{style:{position:"absolute",top:-12,right:25,color:"#00a65a"},children:(0,l.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})}),(0,l.jsx)("input",{type:"text",className:"form-control text-uppercase",name:"name",value:t.name,onChange:function(e){return a(e.target.name,e.target.value,i,t.id)},onDoubleClick:function(){return a("disabledName",!1,i,t.id)},onFocus:function(e){return r(e)},onBlur:function(e){return n(e,"disabledName",i,t.id)},readOnly:t.disabledName})]}),(0,l.jsxs)("div",{className:"mb-3 position-relative mt-3",children:[(0,l.jsx)("span",{className:"position-absolute",style:{top:-18,left:20,color:"#CCC"},children:"E-mail"}),(0,l.jsx)("span",{style:{position:"absolute",top:-12,right:25,color:"#00a65a"},children:(0,l.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})}),(0,l.jsx)("input",{type:"text",className:"form-control text-lowercase",name:"email",value:t.email,onChange:function(e){return a(e.target.name,e.target.value,i,t.id)},onDoubleClick:function(){return a("disabledEmail",!1,i,t.id)},onFocus:function(e){return r(e)},onBlur:function(e){return n(e,"disabledEmail",i,t.id)},readOnly:t.disabledEmail})]}),(0,l.jsxs)("div",{className:"mb-3 position-relative mt-3",children:[(0,l.jsx)("span",{className:"position-absolute",style:{top:-18,left:20,color:"#CCC"},children:"Tel\xe9fono"}),(0,l.jsx)("input",{type:"text",className:"form-control",name:"number",value:t.number?t.number:"",onChange:function(e){return a(e.target.name,e.target.value,i,t.id)},onDoubleClick:function(){return a("disabledNumber",!1,i,t.id)},onFocus:function(e){return r(e)},onBlur:function(e){return n(e,"disabledNumber",i,t.id)},readOnly:t.disabledNumber})]}),!t.id&&(0,l.jsx)("div",{className:"col-12 mt-3 text-center",children:(0,l.jsx)("button",{type:"button",className:"btn btn btn-outline-primary",onClick:function(){return s(i)},style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:"Guardar administrador principal"})})]})},d=function(e){var t=e.id,r=e.club,n=e.adress,a=e.img,i=e.status,s=e.root,o=e.disabledClub,d=e.disabledAdress,m=e.btnMoreInfo,p=e.deleteClub,f=e.changeGeneral,b=e.focus,x=e.blur,h=e.saveAdminRootFirstTime,v=e.changeImgClub;return(0,l.jsx)("div",{className:"col-md-4",style:{marginBottom:50},children:(0,l.jsxs)("div",{style:{background:"#fff",padding:10,borderRadius:6,position:"relative",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)"},children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsx)("i",{className:"fa fa-picture-o","aria-hidden":"true",onClick:function(){return v(t,a,r)},style:{cursor:"pointer",fontSize:23,position:"absolute",right:-18,top:-9,padding:7,background:"#098BEC",color:"#FFF",borderRadius:"100%",opacity:.8}}),(0,l.jsx)("img",{style:{width:200,marginBottom:10,boxShadow:"-3px 3px 10px -2px rgba(0,0,0,0.52)"},alt:"logo",src:a})]}),(0,l.jsx)(c.r,{isOn:i,click:function(){return f("status",!i,t)}})]}),(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsx)("span",{style:{position:"absolute",top:-21,left:0,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Nombre del club"}),(0,l.jsx)("input",{type:"text",name:"club",className:"form-control mb-2 mt-4 text-uppercase",value:r||"",onChange:function(e){return f(e.target.name,e.target.value,t)},onDoubleClick:function(){return f("disabledClub",!1,t)},onFocus:function(e){return b(e)},onBlur:function(e){return x(e,"disabledClub",t)},readOnly:o})]}),(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Admin"}),(0,l.jsx)("div",{className:"text-truncate text-uppercase",children:s.name?s.name:"\xa0"})]}),(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)("hr",{style:{width:"80%"}})}),(0,l.jsx)("div",{className:"accordion mt-2",children:(0,l.jsxs)("div",{className:"accordion-item",children:[(0,l.jsx)("h2",{className:"accordion-header d-flex justify-content-between",children:(0,l.jsx)("button",{className:"btn-toggle d-flex justify-content-center",type:"button",onClick:function(){return f("btnMoreInfo",!m,t)},style:{padding:5},children:m?(0,l.jsx)("i",{className:"fa fa-plus-circle fa-2x","aria-hidden":"true"}):(0,l.jsx)("i",{className:"fa fa-minus-circle fa-2x","aria-hidden":"true"})})}),(0,l.jsxs)("div",{className:"accordion-collapse collapse ".concat(m?"":"show"),children:[(0,l.jsxs)("div",{className:"accordion-body position-relative",children:[(0,l.jsx)("span",{style:{position:"absolute",top:8,left:20,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Direcci\xf3n del club"}),(0,l.jsx)("textarea",{name:"adress",className:"form-control text-uppercase",style:{maxHeight:200,marginTop:15},rows:"5",value:n||"",onChange:function(e){return f(e.target.name,e.target.value,t)},onDoubleClick:function(){return f("disabledAdress",!1,t)},onFocus:function(e){return b(e)},onBlur:function(e){return x(e,"disabledAdress",t)},readOnly:d})]}),(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("img",{style:{width:"70px",marginBottom:"10px",borderRadius:"50%",boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.52)"},alt:"avatar",src:s.img})}),(0,l.jsx)(u,{root:s,changeGeneral:f,focus:b,blur:x,id:t,saveAdminRootFirstTime:h}),(0,l.jsx)("hr",{}),(0,l.jsx)("button",{className:"btn btn-lg btn-outline-danger d-flex",type:"button",onClick:function(){return p(r,t)},style:{padding:5,margin:5},children:(0,l.jsx)("i",{className:"fa fa-trash fa-2x","aria-hidden":"true"})})]})]})})]})})},m=r(4942),p=r(5861),f=r(7757),b=r.n(f),x=r(6e3),h=r(7812),v=r(2859),g=r(362),j=r(4648),N=r(4957),y=(r(5580),"/assets/img/default/no-image-club.png"),k=function(e){var t=e.newClub,r=(0,s.useState)(y),n=(0,i.Z)(r,2),o=n[0],c=n[1],u=(0,s.useRef)(),d=(0,s.useRef)(null),f=(0,s.useState)({club:"",adress:""}),v=(0,i.Z)(f,2),j=v[0],k=v[1],C=function(e){k((0,a.Z)((0,a.Z)({},j),{},(0,m.Z)({},e.target.name,e.target.value.toUpperCase())))},w=function(){var e=(0,p.Z)(b().mark((function e(){var t,r,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof u.current||o===y){e.next=15;break}return e.prev=1,t=u.current.cropper.getCroppedCanvas({width:420,height:180,fillColor:"#fff"}).toDataURL("image/jpeg",.7),c(y),e.next=6,fetch(t).then((function(e){return e.blob()}));case 6:return r=e.sent,n=new File([r],"temporal.jpg",{type:r.type}),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(1),(0,x.NO)({icon:"error",title:"Ocurrio un error al procesar la imagen"}),e.abrupt("return","");case 15:return e.abrupt("return","");case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,p.Z)(b().mark((function e(){var r,n,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,h.l)(j)){e.next=2;break}return e.abrupt("return");case 2:return r=new FormData,e.next=5,w();case 5:return(n=e.sent)&&r.append("img",n),r.append("name",j.club.trim()),r.append("adress",j.adress.trim()),(0,x.lQ)({html:"Creando club"}),e.prev=10,e.next=13,(0,g.x)({endpoint:"/clubs",method:"POST",body:r});case 13:if(a=e.sent,console.log(a),!a.id){e.next=21;break}return t({id:a.id,club:a.name,adress:a.adress,img:a.img,status:a.status,root:{id:"",name:"",email:"",number:"",img:"/assets/img/default/no-image.jpg",disabledName:!1,disabledEmail:!1,disabledNumber:!1},disabledClub:!0,disabledAdress:!0,btnMoreInfo:!0}),k({club:"",adress:""}),e.abrupt("return",(0,x.NO)({icon:"success",title:"Club agregado"}));case 21:(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde ashh"});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 27:case"end":return e.stop()}}),e,null,[[10,24]])})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-6 col-xs-12 d-flex justify-content-center mb-3",children:(0,l.jsxs)("div",{className:"position-relative",style:{width:320,height:"fit-content",border:"2px dashed",padding:8,cursor:"pointer"},children:[(0,l.jsx)(N.Z,{ref:u,src:o,style:{maxHeight:200,width:300},initialAspectRatio:21/9,cropBoxResizable:!1,dragMode:"move",guides:!1,viewMode:0,zoomTo:.5}),(0,l.jsx)("i",{className:"fa fa-2x fa-picture-o position-absolute",onClick:function(){d.current.click()},style:{top:-20,right:-15,color:"#fff",background:"rgb(9, 139, 206)",padding:12,borderRadius:50},"aria-hidden":"true"}),(0,l.jsx)("input",{ref:d,type:"file",onChange:function(e){e.preventDefault();var t=e.target.files[0];if(!/\.(?=jpg|jpeg|png)/gi.test(t.name.toLowerCase()))return(0,x.sM)({icon:"info",title:"Formato de imagen inv\xe1lido",text:"S\xf3lo se permiten imagenes jpg o jpeg"});var r=new FileReader;r.onload=function(){c(r.result),d.current.value=""},r.readAsDataURL(t)},style:{display:"none"}})]})}),(0,l.jsx)("div",{className:"col-md-6 col-xs-12 mt-3",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-12 position-relative",children:[(0,l.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Nombre del club"}),(0,l.jsx)("span",{style:{position:"absolute",top:-12,right:25,color:"#00a65a"},children:(0,l.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true"})}),(0,l.jsx)("input",{type:"text",onChange:C,name:"club",className:"form-control text-uppercase",value:j.club})]}),(0,l.jsxs)("div",{className:"col-12 position-relative mt-3",children:[(0,l.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Direcci\xf3n"}),(0,l.jsx)("textarea",{name:"adress",value:j.adress,className:"form-control text-uppercase",style:{maxHeight:200},rows:"5",onChange:C})]})]})}),(0,l.jsx)("div",{className:"col-12 mt-3 d-flex justify-content-end",children:(0,l.jsx)("button",{type:"button",className:"btn btn btn-outline-primary",onClick:Z,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:(0,l.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})})})]})},C=r(4119),w=function(e){var t=e.editImage,r=e.updateClubs,n=(0,s.useState)(!0),a=(0,i.Z)(n,2),o=a[0],c=a[1],u=(0,s.useRef)(null),d=(0,s.useState)(t.img),m=(0,i.Z)(d,2),f=m[0],h=m[1],v=(0,s.useRef)(!0),j=(0,s.useRef)(null);(0,s.useEffect)((function(){v.current=!0,h(t.img),c(!0)}),[t]);var y=function(){var e=(0,p.Z)(b().mark((function e(){var t,r,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof u.current){e.next=14;break}return e.prev=1,t=u.current.cropper.getCroppedCanvas({width:420,height:180,fillColor:"#fff"}).toDataURL("image/jpeg",.7),e.next=5,fetch(t).then((function(e){return e.blob()}));case 5:return r=e.sent,n=new File([r],"temporal.jpg",{type:r.type}),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(1),(0,x.sM)({icon:"error",title:"Ocurrio un error al procesar la imagen",text:""}),e.abrupt("return","");case 14:return e.abrupt("return","");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,p.Z)(b().mark((function e(t){var n,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("id",t),e.t0=n,e.next=5,y();case 5:return e.t1=e.sent,e.t0.append.call(e.t0,"img",e.t1),n.append("_method","patch"),(0,x.lQ)({html:"Actualizando logo"}),e.prev=9,e.next=12,(0,g.x)({endpoint:"/clubs/logo",method:"POST",body:n});case 12:""!==(a=e.sent)?((0,x.NO)({icon:"success",title:"El logo se actualiz\xf3 correctamente"}),r(t,a),c(!1)):(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(9),(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)(C.u,{modal:o,setModal:c,children:[(0,l.jsx)("div",{className:"modal-crow-header",children:(0,l.jsx)("h4",{children:t.club})}),(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsxs)("div",{className:"position-relative",style:{width:320,height:"fit-content",border:"2px dashed",padding:8,cursor:"pointer"},children:[(0,l.jsx)(N.Z,{ref:u,src:f,style:{maxHeight:200,width:300},initialAspectRatio:21/9,cropBoxResizable:!1,dragMode:"move",guides:!1,viewMode:0,zoomTo:.5}),(0,l.jsx)("i",{className:"fa fa-2x fa-picture-o position-absolute",onClick:function(){j.current.click()},style:{top:-20,right:-15,color:"#fff",background:"rgb(9, 139, 206)",padding:12,borderRadius:50},"aria-hidden":"true"}),(0,l.jsx)("input",{ref:j,type:"file",onChange:function(e){e.preventDefault();var t=e.target.files[0];if(!/\.(?=jpg|jpeg|png)/gi.test(t.name.toLowerCase()))return(0,x.sM)({icon:"info",title:"Formato de imagen inv\xe1lido",text:"S\xf3lo se permiten imagenes jpg o jpeg"});var r=new FileReader;r.onload=function(){v.current=!1,h(r.result),j.current.value=""},r.readAsDataURL(t)},style:{display:"none"}})]})}),(0,l.jsx)("div",{className:"d-flex justify-content-center mt-5",children:(0,l.jsx)("button",{className:"btn btn-primary btn-lg",type:"button",disabled:v.current,onClick:function(){return k(t.id)},style:{padding:5,margin:5},children:"Remplazar imagen"})})]})},Z=function(){var e=(0,s.useContext)(o.X).setContext,t=function(){var e=(0,s.useState)({load:!0,data:[]}),t=(0,i.Z)(e,2),r=t[0],o=t[1],c=(0,s.useRef)(null),l=(0,s.useRef)(!0),u=function(){var e=(0,p.Z)(b().mark((function e(t,i,s){var c,l,u=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=u.length>3&&void 0!==u[3]?u[3]:0,e.next=3,N(t,i,s);case 3:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:(l=(0,n.Z)(r.data)).forEach((function(e){e.id===s&&(0===c?e[t]=y(t,i):e.root[t]=y(t,i))})),o((0,a.Z)((0,a.Z)({},r),{},{data:l}));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,p.Z)(b().mark((function e(t,r,n){var a,i,s=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(a=s.length>3&&void 0!==s[3]?s[3]:0)){e.next=3;break}return e.abrupt("return");case 3:if(c.current===t.target.value){e.next=13;break}if(!(0,h.W)(t.target.name,t.target.value)){e.next=8;break}u(t.target.name,c.current,n,a),e.next=13;break;case 8:return i=0===a?n:a,e.next=11,j(t.target.name,t.target.value,i);case 11:if(!e.sent){e.next=13;break}u(t.target.name,c.current,n,a);case 13:u(r,!0,n,a);case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,p.Z)(b().mark((function e(t){var r,n,a,i,s,o,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,n=t.id,a=t.value,i=t.endpoint,s=t.label,(0,x.lQ)({html:"Actualizando ".concat(s)}),o=(0,m.Z)({id:n},r,a),e.prev=3,e.next=6,(0,g.x)({endpoint:i,method:"PATCH",body:o,json:!0});case 6:if(c=e.sent,console.log(c),!c.id){e.next=13;break}return(0,x.NO)({icon:"success",title:"".concat(s," actualizado")}),e.abrupt("return",!1);case 13:return(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return",!0);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(3),(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunicaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,p.Z)(b().mark((function e(t,r,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="club"===e.t0?3:"adress"===e.t0?6:"name"===e.t0?9:"email"===e.t0?12:"number"===e.t0?15:18;break;case 3:return e.next=5,f({endpoint:"/clubs",name:"name",value:r,id:n,label:"nombre del club"});case 5:case 8:case 11:case 14:case 17:return e.abrupt("return",e.sent);case 6:return e.next=8,f({endpoint:"/clubs",name:"adress",value:r,id:n,label:"direcci\xf3n"});case 9:return e.next=11,f({endpoint:"/users",name:"name",value:r,id:n,label:"nombre del administrador"});case 12:return e.next=14,f({endpoint:"/users",name:"email",value:r,id:n,label:"e-mail"});case 15:return e.next=17,f({endpoint:"/users",name:"number",value:r.replace(/[-]/g,""),id:n,label:"tel\xe9fono"});case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),N=function(){var e=(0,p.Z)(b().mark((function e(t,r,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="status"===e.t0?3:6;break;case 3:return e.next=5,f({endpoint:"/clubs",name:"status",value:r?1:0,id:n,label:"estatus"});case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),y=function(e,t){return"number"===e?(0,v.yD)(t):t},k=function(){var e=(0,p.Z)(b().mark((function e(t){var i,s,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.data.find((function(e){return e.id===t})),!(0,h.l)(i.root)){e.next=3;break}return e.abrupt("return");case 3:if(!(r.data.filter((function(e){return e.root.email===i.root.email})).length>1)){e.next=7;break}return(0,x.sM)({title:"E-mail del administrador ya existe"}),e.abrupt("return",!0);case 7:return s={id_club:t,name:i.root.name,email:i.root.email,number:i.root.number.replace(/[-]/g,"")},(0,x.lQ)({html:"Agregando admistrador"}),e.prev=9,e.next=12,(0,g.x)({endpoint:"/users/admin_club",method:"POST",body:s,json:!0});case 12:if(c=e.sent,console.log(c),!c.id){e.next=21;break}(0,x.NO)({icon:"success",title:"El administrador se actualiz\xf3 correctamente"}),(l=(0,n.Z)(r.data)).forEach((function(e){e.id===t&&(e.root=(0,a.Z)((0,a.Z)({},e.root),{},{id:c.id,disabledName:!0,disabledEmail:!0,disabledNumber:!0}))})),o((0,a.Z)((0,a.Z)({},r),{},{data:l})),e.next=24;break;case 21:if(!c.errors.email){e.next=23;break}return e.abrupt("return",(0,x.sM)({title:"E-mail del administrador ya existe"}));case 23:(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(9),(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 29:case"end":return e.stop()}}),e,null,[[9,26]])})));return function(t){return e.apply(this,arguments)}}(),C=(0,s.useCallback)((0,p.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.x)({endpoint:"/clubs"});case 2:if(t=e.sent,l.current){e.next=5;break}return e.abrupt("return");case 5:t=t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{disabledClub:!0,disabledAdress:!0,btnMoreInfo:!0,root:(0,a.Z)((0,a.Z)({},e.root),{},{number:(0,v.wK)(e.root.number,"-",2),disabledName:!!e.root.name,disabledEmail:!!e.root.name,disabledNumber:!!e.root.name})})})),o({load:!1,data:t});case 7:case"end":return e.stop()}}),e)}))),[]);return(0,s.useEffect)((function(){C()}),[C]),(0,s.useEffect)((function(){return function(){l.current=!1}}),[]),{clubs:r,setClubs:o,changeGeneral:u,focus:function(e){c.current=e.target.value.trim()},blur:d,deleteClub:function(e,t){(0,x.uI)("\xbfDeseas eliminar al club: \n".concat(e,"?"),"Al eliminar al club se desencadenar\xe1 un eliminaci\xf3n masiva de torneos, jugadores y todo lo relacionado al club",function(){var n=(0,p.Z)(b().mark((function n(i){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.isConfirmed){n.next=12;break}return(0,x.lQ)({html:"Eliminando club"}),n.prev=2,n.next=5,(0,g.x)({endpoint:"/clubs/".concat(t),method:"DELETE"});case 5:n.sent.id?(o((0,a.Z)((0,a.Z)({},r),{},{data:r.data.filter((function(e){return e.id!==t}))})),(0,x.NO)({icon:"success",title:"".concat(e," eliminado")})):(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),(0,x.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}())},saveAdminRootFirstTime:k}}(),r=t.clubs,c=t.setClubs,u=t.changeGeneral,f=t.blur,N=t.focus,y=t.deleteClub,C=t.saveAdminRootFirstTime,Z=(0,s.useState)({id:"",img:"",club:""}),E=(0,i.Z)(Z,2),M=E[0],O=E[1];(0,s.useEffect)((function(){e((function(e){return(0,a.Z)((0,a.Z)({},e),{},{titlePage:"Clubs"})}))}),[e]);var R=function(e,t,r){O({id:e,img:t,club:r})};return(0,l.jsxs)("div",{className:"main-content",children:[(0,l.jsx)("div",{className:"main-content-inner",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-lg-12 mt-3",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsx)("div",{className:"card-body",children:(0,l.jsx)(k,{newClub:function(e){var t=[].concat((0,n.Z)(r.data),[e]);t.sort((function(e,t){return e.club>t.club?1:e.club<t.club?-1:0})),c((0,a.Z)((0,a.Z)({},r),{},{data:t}))}})})})})})}),(0,l.jsx)("div",{className:"main-content-inner",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-lg-12",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsx)("div",{className:"card-body",children:(0,l.jsxs)("div",{className:"row",children:[r.load?(0,l.jsx)(j._,{}):r.data.map((function(e){return(0,l.jsx)(d,(0,a.Z)({changeGeneral:u,blur:f,focus:N,deleteClub:y,saveAdminRootFirstTime:C,changeImgClub:R},e),e.id)})),M.id&&(0,l.jsx)(w,{editImage:M,updateClubs:function(e,t){var i=(0,n.Z)(r.data);i.forEach((function(r){r.id===e&&(r.img=t)})),c((0,a.Z)((0,a.Z)({},r),{},{data:i}))}})]})})})})})})]})}},4648:function(e,t,r){r.d(t,{_:function(){return a}});r(2791);var n=r(184),a=function(){return(0,n.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[(0,n.jsx)("div",{className:"loader"}),(0,n.jsx)("div",{className:"text-loader",children:"Cargando..."})]})}},4119:function(e,t,r){r.d(t,{u:function(){return a}});var n=r(184),a=function(e){var t=e.children,r=e.modal,a=void 0!==r&&r,i=e.setModal,s=e.callback,o=void 0===s?function(){}:s;return a?(0,n.jsx)("div",{className:"modal-crow-main",children:(0,n.jsxs)("div",{className:"modal-crow",children:[(0,n.jsx)("div",{className:"modal-crow-contain",children:t}),(0,n.jsx)("div",{className:"modal-crow-footer",children:(0,n.jsx)("div",{className:"modal-align-end",children:(0,n.jsx)("button",{type:"button",className:"btn-modal btn-default-modal",onClick:function(){i(!1),o()},children:" Salir"})})})]})}):(0,n.jsx)(n.Fragment,{})}},1628:function(e,t,r){r.d(t,{r:function(){return a}});var n=r(184),a=function(e){var t=e.isOn,r=e.click;return(0,n.jsx)("span",{className:"slider-custome ".concat(t?"checked":""),onClick:r,children:(0,n.jsx)("label",{className:"switch",children:(0,n.jsx)("span",{className:"slider round"})})})}}}]);
//# sourceMappingURL=10.2fa0e633.chunk.js.map