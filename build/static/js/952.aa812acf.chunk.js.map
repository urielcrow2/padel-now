{"version":3,"file":"static/js/952.aa812acf.chunk.js","mappings":"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","sources":["componets/perfil/PerfilScreenAdmins.js"],"sourcesContent":["import {useContext , useEffect , useState, useRef} from 'react';\nimport {useSelector,useDispatch} from 'react-redux';\nimport Cropper from \"react-cropper\";\nimport { updateImg } from '../../actions';\nimport {GetListTournamentHook} from '../time/GetListTournamentHook';\nimport {customeContext} from '../../context/context';\nimport {GetListTableUserHook} from './GetListTableUserHook';\nimport {Load2} from '../utils/load2/Load2';\nimport {waitSwal,mixinSwal,infoSwal} from '../utils/swalCustome';\nimport {fetchCustome2} from \"../../helpers/fetch\";\nimport {PerfilData} from './PerfilData'\nimport {PerfilClubsGestionComponent} from './PerfilClubsGestionComponent';\nimport {ButtonFloat} from '../utils/buttonFloat/ButtonFloatComponent';\n  /*********************Controlamos la lista de clubs*********************/\nimport {PerfilClubComponent,PerfilClubComponentCarpet} from './PerfilClubComponent';\nimport {PerfilClubsHook} from './PerfilClubsHook';\n\nimport \"cropperjs/dist/cropper.css\";\n\nconst PerfilScreen = ()=>{\n\n    const {image} = useSelector( store => store.auth );\n    const dispatch = useDispatch();\n    const { setContext } = useContext(customeContext);\n\n    /*********************Controlamos la lista de clubs*********************/\n    const {clubs,setClubs,onChangeClub,idClub} = PerfilClubsHook();\n\n\n /*********************Controlamos la lista torneos*********************/\n    const {listTournaments} = GetListTournamentHook(idClub);\n    \n\n\n    const [idTournament,setIdTournament] = useState(0);\n    const {data} = GetListTableUserHook(idTournament);\n\n\n    const [imageCropper, setImageCropper] = useState(image);\n    const cropperRef = useRef();\n    const inputFile = useRef(null);\n    const [toggleBtnSaveImg,setToggleBtnSaveImg] = useState(true);\n\n    const [modalGestionClubs,setModalGestionClubs] = useState(false);\n\n\n    const [formPass,setFormPass] = useState({\n        pass:\"\",\n        pass2:\"\"\n    });\n\n    const [input, setInput] = useState({\n        type:'password',\n        check:'fa-square color-disabled-check'\n    });\n\n    useEffect(() => {\n        setContext( context => (\n            {   ...context,\n                titlePage : 'Mis datos'\n            })\n        );\n    },[setContext]);\n\n    useEffect(() => {\n       \n    },[idClub]);\n\n\n    const changeType = (val)=>{\n        let [type,check] = ['password','fa-square color-disabled-check'];\n        \n        if(val === 'password'){\n            type = 'text';\n            check = 'fa-check-square color-enabled-check';\n        }\n\n        setInput({\n            type,\n            check\n        });\n    }\n\n    const onChangeTournament = (e)=>{\n        setIdTournament(e.target.value);\n    }\n\n    const onUpdatePass = async()=>{\n\n        const {pass,pass2} = formPass;\n\n        if(pass !== pass2){\n            return infoSwal({\n                icon: 'info',\n                title: 'Contraseñas incorrectas',\n                text: `La contraseña y la confirmación deben ser identicas` ,\n            });\n        }\n\n        if(!pass.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?_.])[A-Za-z\\d@$!%*?_.]{10,15}$/)){\n            return infoSwal({\n                icon: 'info',\n                title: 'Contraseña debil',\n                text: `La contraseña debe de tener mínimo 10 y máximo 15 caracteres; al menos 1 número,1 mínuscula, 1 máyuscula y alguno de los siguientes caracteres especiales @ $ ! % * ? . _` ,\n            });\n        }\n\n         waitSwal({html:'Actualizando contraseña'});\n            try{\n    \n                await fetchCustome2({ \n                    endpoint : '/perfil/passwd',\n                    method :'PATCH',\n                    body:{\n                        'passwd':pass\n                    },\n                    json:true\n                });\n    \n                setFormPass({\n                    pass:\"\",\n                    pass2:\"\"\n                })\n\n                mixinSwal({ icon: 'success',title: `La contraseña se actualizó correctamente`});\n    \n            }\n            catch(e){\n                infoSwal({\n                    icon: 'error',\n                    title: 'Ocurrio un error',\n                    text: `Error de comunucación con el servidor, intentelo más tarde` ,\n                });\n            }\n\n    }\n\n    const onChange = (e) => {\n        e.preventDefault();\n        let file = e.target.files[0];\n        if (/\\.(?=jpg|jpeg)/gi.test(file.name.toLowerCase())) {\n            const reader = new FileReader();\n            reader.onload = () => {\n                setToggleBtnSaveImg(false);\n                setImageCropper(reader.result);\n                inputFile.current.value = \"\";\n            };\n            reader.readAsDataURL(file);\n        }\n        else{\n            return infoSwal({\n                icon: 'info',\n                title: 'Formato de imagen inválido',\n                text: `Sólo se permiten imagenes jpg o jpeg` ,\n            });\n        }\n    };\n      \n    const clickInputFile = ()=>{\n        inputFile.current.click()\n    }\n    \n    const getCropData = async() => {\n\n        if (typeof cropperRef.current !== \"undefined\") {\n            const newImage = cropperRef.current.cropper.getCroppedCanvas({\n                width: 512,//podemos establecer un tamaño fijo en la imagen final en este caso manejamos la relación 16 / 9\n                height: 512,\n                fillColor: '#fff'\n            })\n            .toDataURL(\"image/jpeg\",0.7);//bajamos la calidad para disminuir considerablemente el peso sin afectar la calidad\n\n            const blob = await fetch(newImage).then(temp => temp.blob());//con la imagen resultante creamos un blob\n            const temp = new File([blob], \"temporal.jpg\", {type: blob.type});//hecho el blob creamos el archivo\n\n\n            const form = new FormData();\n            form.append(\"img\",temp);\n            form.append(\"_method\",'patch');\n\n\n            waitSwal({html:'Actualizando imagen'});\n\n            try{\n    \n                const resp = await fetchCustome2({ \n                    endpoint : '/perfil/avatar',\n                    method :'POST',\n                    body:form\n                });\n    \n               if(resp !== \"\"){\n                   mixinSwal({ icon: 'success',title: `La imagen se actualizó correctamente`});\n                   setToggleBtnSaveImg(true);\n                   setImageCropper(resp);\n                   dispatch(updateImg(resp));\n               }\n               else{\n                    infoSwal({\n                        icon: 'error',\n                        title: 'Ocurrio un error',\n                        text: `Error de comunucación con el servidor, intentelo más tarde` ,\n                    });\n               }\n    \n            }\n            catch(e){\n                infoSwal({\n                    icon: 'error',\n                    title: 'Ocurrio un error',\n                    text: `Error de comunucación con el servidor, intentelo más tarde` ,\n                });\n            }\n            \n        }\n    };\n\n    return(\n        <div className=\"main-content\">\n\n            <div className=\"main-content-inner\">\n                <div className=\"row\">\n                    <div className=\"col-lg-12 mt-3\">\n                        <div className=\"card\">\n                            <div className =\"card-body\">\n                                <div className=\"row\">\n\n                                    <div className=\"col-md-12 col-xs-12 mt-1 mb-5 text-center\">\n                                        <h5>Actualiza tus datos</h5>\n                                    </div>\n\n                                    {\n                                        clubs.load \n                                        ?\n                                        <Load2 />\n                                        :\n                                        <PerfilData {...clubs.user}/>\n\n                                    }\n\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div className=\"main-content-inner\">\n                <div className=\"row\">\n            \n                    <div className=\"col-md-6 col-sm-12\">\n                        <div className=\"card\">\n                            <div className =\"card-body\">\n                                <div className=\"row\">\n                                    <div className=\"col-md-12 col-xs-12 mt-1 mb-3 text-center\">\n                                        <h5>Actualiza tu imagen</h5>\n                                    </div>\n                                    <div className=\"col-md-12 col-xs-12 mt-2 d-flex justify-content-center\">\n                                       <div className=\"position-relative\" style={{width:220,border:'2px dashed',padding:8,cursor:'pointer'}}>\n                                            <Cropper\n                                                ref={cropperRef}\n                                                src={imageCropper}\n                                                style={{ maxHeight: 200,width: 200}}\n                                                initialAspectRatio={1}\n                                                cropBoxResizable={false}\n                                                dragMode = 'move'\n                                                guides={false}\n                                                viewMode={1}\n                                                zoomTo={0.2}\n                                                //zoomOnWheel={!toggleBtnSaveImg}\n                                                // checkCrossOrigin={false}\n                                                // checkOrientation={false}\n                                            />\n                                            <i className=\"fa fa-2x fa-picture-o position-absolute\" onClick={clickInputFile} style={{top:-20,right:-15,color:'#fff',background:'rgb(9, 139, 206)',padding:12,borderRadius:50}} aria-hidden=\"true\"></i>\n                                            <input ref={inputFile} type=\"file\" onChange={onChange} style={{display:'none'}}/>\n                                       </div>\n                                    </div>\n                                    <div className=\"col-12 mt-4 mb-2 d-flex justify-content-center\">\n                                        <button type=\"button\" className=\"btn btn-outline-primary\" onClick={getCropData} disabled={toggleBtnSaveImg} style={{boxShadow: \"-3px 3px 15px -2px rgba(0,0,0,0.22)\"}}> Actualizar</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"col-md-6 col-sm-12\">\n                        <div className=\"card\">\n                            <div className =\"card-body\">\n                                <div className=\"row\">\n                                    <div className=\"col-md-12 col-xs-12 mt-1 mb-5 text-center\">\n                                        <h5>Actualiza tu contraseña</h5>\n                                    </div>\n                                    <div className=\"col-md-12 col-xs-12 mt-3 text-center\">\n                                        <div style={{position:\"relative\"}}>\n                                            <span style={{position:\"absolute\",top:-12,left:25,background:\"#fff\",padding: \"0 10px\",color:\"#ccc\"}}>Nueva contraseña</span>\n                                            <input \n                                                type={input.type} \n                                                className=\"form-control\" \n                                                onChange={(e)=>setFormPass(value=>({\n                                                    ...value,\n                                                    pass:e.target.value.trim()\n                                                }))} \n                                                value={formPass.pass}/>\n                                        </div>\n                                    </div>\n                                    <div className=\"col-md-12 col-xs-12 mt-3 text-center\">\n                                        <div style={{position:\"relative\"}}>\n                                            <span style={{position:\"absolute\",top:-12,left:25,background:\"#fff\",padding: \"0 10px\",color:\"#ccc\"}}>Repite la nueva contraseña</span>\n                                            <input  \n                                                type={input.type} \n                                                className=\"form-control\" \n                                                onChange={(e)=>setFormPass(value=>({\n                                                    ...value,\n                                                    pass2:e.target.value.trim()\n                                                }))} \n                                                value={formPass.pass2}/>\n                                        </div>\n                                    </div>\n                                    <div className=\"col-12 mt-4 mb-2\">\n                                        <div style={{position:'absolute',cursor:'pointer',zIndex:3}} onClick={()=>changeType(input.type)}>\n                                            <i className={`fa ${input.check} fa-2x me-1`} style={{cursor:'pointer'}}></i>\n                                            <label className=\"custom-control-label ml-3\" style={{cursor:'pointer'}}>Mostrar</label>\n                                        </div>\n                                    </div>\n                                    <div className=\"col-12 mt-2 mb-5 d-flex justify-content-end\">\n                                        <button type=\"button\" className=\"btn btn-outline-primary\" onClick={onUpdatePass} style={{boxShadow: \"-3px 3px 15px -2px rgba(0,0,0,0.22)\"}}> Actualizar</button>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n             <ButtonFloat hight={200}/>\n\n\n        </div>\n    );\n}\n\nexport default PerfilScreen;"],"names":["image","useSelector","store","auth","dispatch","useDispatch","setContext","useContext","customeContext","PerfilClubsHook","clubs","idClub","setClubs","onChangeClub","GetListTournamentHook","listTournaments","useState","idTournament","GetListTableUserHook","data","imageCropper","setImageCropper","cropperRef","useRef","inputFile","toggleBtnSaveImg","setToggleBtnSaveImg","pass","pass2","formPass","setFormPass","type","check","input","setInput","useEffect","context","titlePage","onUpdatePass","infoSwal","icon","title","text","match","waitSwal","html","fetchCustome2","endpoint","method","body","json","mixinSwal","getCropData","current","newImage","cropper","getCroppedCanvas","width","height","fillColor","toDataURL","fetch","then","temp","blob","File","form","FormData","append","resp","updateImg","className","load","user","style","border","padding","cursor","ref","src","maxHeight","initialAspectRatio","cropBoxResizable","dragMode","guides","viewMode","zoomTo","onClick","click","top","right","color","background","borderRadius","onChange","e","preventDefault","file","target","files","test","name","toLowerCase","reader","FileReader","onload","result","value","readAsDataURL","display","disabled","boxShadow","position","left","trim","zIndex","val","changeType","hight"],"sourceRoot":""}