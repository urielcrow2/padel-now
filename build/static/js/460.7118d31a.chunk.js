"use strict";(self.webpackChunknuevo=self.webpackChunknuevo||[]).push([[460],{5753:function(e,s,t){t.r(s);var n=t(5861),a=t(1413),c=t(885),r=t(7757),l=t.n(r),i=t(2791),o=t(6030),d=t(4957),u=t(518),x=t(5789),m=t(2666),h=t(4005),p=t(4648),j=t(6e3),f=t(362),v=t(8310),b=t(2237),g=t(2728),N=t(6353),y=t(4351),w=(t(5580),t(184));s.default=function(){var e=(0,o.v9)((function(e){return e.auth})).image,s=(0,o.I0)(),t=(0,i.useContext)(m.X).setContext,r=(0,y.Z)(),C=r.clubs,k=r.setClubs,Z=r.onChangeClub,z=r.idClub,S=(0,x.j)(z).listTournaments,M=(0,i.useState)(0),A=(0,c.Z)(M,2),R=A[0],F=A[1],G=(0,h.I)(R).data,E=(0,i.useState)(e),L=(0,c.Z)(E,2),O=L[0],D=L[1],T=(0,i.useRef)(),_=(0,i.useRef)(null),q=(0,i.useState)(!0),I=(0,c.Z)(q,2),P=I[0],Q=I[1],$=(0,i.useState)(!1),H=(0,c.Z)($,2),J=H[0],B=H[1],U=(0,i.useState)({pass:"",pass2:""}),K=(0,c.Z)(U,2),X=K[0],V=K[1],W=(0,i.useState)({type:"password",check:"fa-square color-disabled-check"}),Y=(0,c.Z)(W,2),ee=Y[0],se=Y[1],te=(0,i.useRef)(!1);(0,i.useEffect)((function(){t((function(e){return(0,a.Z)((0,a.Z)({},e),{},{titlePage:"Mis datos"})}))}),[t]),(0,i.useEffect)((function(){te.current&&(0,j.lQ)({html:"Cargando lista de torneos"})}),[z]),(0,i.useEffect)((function(){te.current&&(0,j.eJ)()}),[S.list]),(0,i.useEffect)((function(){te.current?(0,j.eJ)():te.current=!0}),[G.load]);var ne=function(){var e=(0,n.Z)(l().mark((function e(){var s,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=X.pass,t=X.pass2,s===t){e.next=3;break}return e.abrupt("return",(0,j.sM)({icon:"info",title:"Contrase\xf1as incorrectas",text:"La contrase\xf1a y la confirmaci\xf3n deben ser identicas"}));case 3:if(s.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?_.])[A-Za-z\d@$!%*?_.]{10,15}$/)){e.next=5;break}return e.abrupt("return",(0,j.sM)({icon:"info",title:"Contrase\xf1a debil",text:"La contrase\xf1a debe de tener m\xednimo 10 y m\xe1ximo 15 caracteres; al menos 1 n\xfamero,1 m\xednuscula, 1 m\xe1yuscula y alguno de los siguientes caracteres especiales @ $ ! % * ? . _"}));case 5:return(0,j.lQ)({html:"Actualizando contrase\xf1a"}),e.prev=6,e.next=9,(0,f.x)({endpoint:"/perfil/passwd",method:"PATCH",body:{passwd:s},json:!0});case 9:V({pass:"",pass2:""}),(0,j.NO)({icon:"success",title:"La contrase\xf1a se actualiz\xf3 correctamente"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),(0,j.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,n.Z)(l().mark((function e(){var t,n,a,c,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof T.current){e.next=20;break}return t=T.current.cropper.getCroppedCanvas({width:512,height:512,fillColor:"#fff"}).toDataURL("image/jpeg",.7),e.next=4,fetch(t).then((function(e){return e.blob()}));case 4:return n=e.sent,a=new File([n],"temporal.jpg",{type:n.type}),(c=new FormData).append("img",a),c.append("_method","patch"),(0,j.lQ)({html:"Actualizando imagen"}),e.prev=10,e.next=13,(0,f.x)({endpoint:"/perfil/avatar",method:"POST",body:c});case 13:""!==(r=e.sent)?((0,j.NO)({icon:"success",title:"La imagen se actualiz\xf3 correctamente"}),Q(!0),D(r),s((0,u.HF)(r))):(0,j.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),(0,j.sM)({icon:"error",title:"Ocurrio un error",text:"Error de comunucaci\xf3n con el servidor, intentelo m\xe1s tarde"});case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)("div",{className:"main-content",children:[(0,w.jsx)("div",{className:"main-content-inner",children:(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-lg-12 mt-3",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsxs)("div",{className:"card-body",children:[(0,w.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,w.jsx)("div",{style:{width:"87%"},children:(0,w.jsx)(N.q,{clubs:C,onChangeClub:Z})}),(0,w.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return B(!0)},children:(0,w.jsx)("i",{className:"fa fa-shield","aria-hidden":"true"})})]}),(0,w.jsx)(N.K,{clubs:C,idClub:z})]})})})})}),J&&!C.load&&(0,w.jsx)(b.s,{clubs:C,setClubs:k,modalGestionClubs:J,setModalGestionClubs:B}),(0,w.jsx)("div",{className:"main-content-inner",children:(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-lg-12",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsxs)("div",{className:"col-12 mb-5",style:{position:"relative"},children:[(0,w.jsx)("span",{style:{position:"absolute",top:-21,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Selecciona un torneo"}),(0,w.jsx)("div",{className:"d-flex justify-content-between",children:(0,w.jsx)("select",{className:"form-control text-uppercase",onChange:function(e){0!==parseInt(e.target.value)&&((0,j.lQ)({html:"Cargando torneo"}),F(e.target.value))},disabled:S.load,value:R,children:S.load?(0,w.jsx)("option",{disabled:!0,value:"0",children:"..."}):S.list.map((function(e){return(0,w.jsx)("option",{value:e.id,children:e.name},e.id)}))})})]}),(0,w.jsx)("div",{className:"col-md-6 col-xs-12 mt-3 text-center",children:G.load?(0,w.jsx)(w.Fragment,{}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h4",{className:"text-center",children:"Pr\xf3ximo juego"}),(0,w.jsxs)("h5",{className:"text-center",children:[G.nextGame.date," "]}),(0,w.jsx)("hr",{}),(0,w.jsx)("div",{className:"row",children:(0,w.jsxs)("h1",{className:"text-center",children:["Cancha ",G.nextGame.curt," ",(0,w.jsxs)("span",{className:"badge bg-secondary",children:[G.nextGame.time&&G.nextGame.time.slice(0,5),"  hrs."]})]})})]})}),(0,w.jsx)("div",{className:"col-md-6 col-xs-12 mt-3 text-center",children:G.load?(0,w.jsx)(w.Fragment,{}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h4",{children:"Ranking: "}),(0,w.jsxs)("span",{className:"badge bg-secondary",style:{fontSize:40,marginTop:10},children:[" ",G.ranking," "]})]})})]})})})})})}),(0,w.jsx)("div",{className:"main-content-inner",children:(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-lg-12",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsx)("div",{className:"row",children:G.load?(0,w.jsx)(w.Fragment,{}):(0,w.jsxs)("table",{className:"table",children:[(0,w.jsx)("thead",{className:"table-dark",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"col",children:"Jornada"}),(0,w.jsx)("th",{scope:"col",children:"Set 1"}),(0,w.jsx)("th",{scope:"col",children:"Set 2"}),(0,w.jsx)("th",{scope:"col",children:"Set 3"}),(0,w.jsx)("th",{scope:"col",children:"Total"}),(0,w.jsx)("th",{scope:"col",children:"Ranking"}),(0,w.jsx)("th",{scope:"col",children:"Cancha"})]})}),(0,w.jsx)("tbody",{children:G.journals.map((function(e){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",children:e.journal}),(0,w.jsx)("td",{children:e.set1}),(0,w.jsx)("td",{children:e.set2}),(0,w.jsx)("td",{children:e.set3}),(0,w.jsx)("td",{children:e.pointsGeneral}),(0,w.jsx)("td",{children:e.positionGeneral}),(0,w.jsx)("td",{children:e.court})]},e.journal)}))})]})})})})})})}),(0,w.jsx)("div",{className:"main-content-inner",children:(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col-lg-12",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-md-12 col-xs-12 mt-1 mb-5 text-center",children:(0,w.jsx)("h5",{children:"Actualiza tus datos"})}),C.load?(0,w.jsx)(p._,{}):(0,w.jsx)(v.y,(0,a.Z)({},C.user))]})})})})})}),(0,w.jsx)("div",{className:"main-content-inner",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-md-6 col-sm-12",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-md-12 col-xs-12 mt-1 mb-3 text-center",children:(0,w.jsx)("h5",{children:"Actualiza tu imagen"})}),(0,w.jsx)("div",{className:"col-md-12 col-xs-12 mt-2 d-flex justify-content-center",children:(0,w.jsxs)("div",{className:"position-relative",style:{width:220,border:"2px dashed",padding:8,cursor:"pointer"},children:[(0,w.jsx)(d.Z,{ref:T,src:O,style:{maxHeight:200,width:200},initialAspectRatio:1,cropBoxResizable:!1,dragMode:"move",guides:!1,viewMode:1,zoomTo:.2,cropBoxMovable:!1,toggleDragModeOnDblclick:!1}),(0,w.jsx)("i",{className:"fa fa-2x fa-picture-o position-absolute",onClick:function(){_.current.click()},style:{top:-20,right:-15,color:"#fff",background:"rgb(9, 139, 206)",padding:12,borderRadius:50},"aria-hidden":"true"}),(0,w.jsx)("input",{ref:_,type:"file",onChange:function(e){e.preventDefault();var s=e.target.files[0];if(!/\.(?=jpg|jpeg)/gi.test(s.name.toLowerCase()))return(0,j.sM)({icon:"info",title:"Formato de imagen inv\xe1lido",text:"S\xf3lo se permiten imagenes jpg o jpeg"});var t=new FileReader;t.onload=function(){Q(!1),D(t.result),_.current.value=""},t.readAsDataURL(s)},style:{display:"none"}})]})}),(0,w.jsx)("div",{className:"col-12 mt-4 mb-2 d-flex justify-content-center",children:(0,w.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:ae,disabled:P,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:" Actualizar"})})]})})})}),(0,w.jsx)("div",{className:"col-md-6 col-sm-12",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-md-12 col-xs-12 mt-1 mb-5 text-center",children:(0,w.jsx)("h5",{children:"Actualiza tu contrase\xf1a"})}),(0,w.jsx)("div",{className:"col-md-12 col-xs-12 mt-3 text-center",children:(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Nueva contrase\xf1a"}),(0,w.jsx)("input",{type:ee.type,className:"form-control",onChange:function(e){return V((function(s){return(0,a.Z)((0,a.Z)({},s),{},{pass:e.target.value.trim()})}))},value:X.pass})]})}),(0,w.jsx)("div",{className:"col-md-12 col-xs-12 mt-3 text-center",children:(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("span",{style:{position:"absolute",top:-12,left:25,background:"#fff",padding:"0 10px",color:"#ccc"},children:"Repite la nueva contrase\xf1a"}),(0,w.jsx)("input",{type:ee.type,className:"form-control",onChange:function(e){return V((function(s){return(0,a.Z)((0,a.Z)({},s),{},{pass2:e.target.value.trim()})}))},value:X.pass2})]})}),(0,w.jsx)("div",{className:"col-12 mt-4 mb-2",children:(0,w.jsxs)("div",{style:{position:"absolute",cursor:"pointer",zIndex:3},onClick:function(){return function(e){var s="password",t="fa-square color-disabled-check";"password"===e&&(s="text",t="fa-check-square color-enabled-check"),se({type:s,check:t})}(ee.type)},children:[(0,w.jsx)("i",{className:"fa ".concat(ee.check," fa-2x me-1"),style:{cursor:"pointer"}}),(0,w.jsx)("label",{className:"custom-control-label ml-3",style:{cursor:"pointer"},children:"Mostrar"})]})}),(0,w.jsx)("div",{className:"col-12 mt-2 mb-5 d-flex justify-content-end",children:(0,w.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:ne,style:{boxShadow:"-3px 3px 15px -2px rgba(0,0,0,0.22)"},children:" Actualizar"})})]})})})})]})}),(0,w.jsx)(g.t,{hight:200})]})}}}]);
//# sourceMappingURL=460.7118d31a.chunk.js.map